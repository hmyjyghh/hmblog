(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{539:function(t,a,s){"use strict";s.r(a);var n=s(3),r=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"langchain-核心知识点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#langchain-核心知识点"}},[t._v("#")]),t._v(" Langchain 核心知识点")]),t._v(" "),a("h3",{attrs:{id:"_1-langchain-表达式语言-lcel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-langchain-表达式语言-lcel"}},[t._v("#")]),t._v(" 1. LangChain 表达式语言（LCEL）")]),t._v(" "),a("div",{staticClass:"language-py extra-class"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[t._v("prompt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pull"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rlm/rag-prompt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),a("p",[t._v("这行代码 "),a("code",[t._v('prompt = hub.pull("rlm/rag-prompt")')]),t._v(" 是 LangChain 中一个非常重要且强大的功能。让我为您详细解释它的作用：")]),t._v(" "),a("h2",{attrs:{id:"核心作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#核心作用"}},[t._v("#")]),t._v(" 核心作用")]),t._v(" "),a("p",[a("strong",[t._v("从 LangChain Hub 拉取一个预先设计好的、用于 RAG（检索增强生成）任务的提示词模板。")])]),t._v(" "),a("h2",{attrs:{id:"详细解释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#详细解释"}},[t._v("#")]),t._v(" 详细解释")]),t._v(" "),a("h3",{attrs:{id:"_1-langchain-hub-是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-langchain-hub-是什么"}},[t._v("#")]),t._v(" 1. LangChain Hub 是什么？")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("一个集中的提示词仓库")]),t._v("：类似于 Docker Hub 之于容器镜像，或 GitHub 之于代码")]),t._v(" "),a("li",[a("strong",[t._v("社区共享的平台")]),t._v("：开发者可以发布、共享和发现高质量的提示词模板")]),t._v(" "),a("li",[a("strong",[t._v("版本化管理")]),t._v("：每个提示词都有版本控制，确保可重现性")])]),t._v(" "),a("h3",{attrs:{id:"_2-rlm-rag-prompt-的具体内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-rlm-rag-prompt-的具体内容"}},[t._v("#")]),t._v(" 2. "),a("code",[t._v('"rlm/rag-prompt"')]),t._v(" 的具体内容")]),t._v(" "),a("blockquote",[a("p",[t._v("这是一个用于 RAG 任务的提示词模板，它定义了模型在生成答案时的行为。看这里\n当您拉取这个特定的提示词时，您得到的大致是这样的模板：")])]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prompts "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ChatPromptTemplate\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 这类似于您实际获取的内容：")]),t._v("\ntemplate "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""You are an assistant for question-answering tasks. Use the following pieces of retrieved context to answer the question. If you don\'t know the answer, just say that you don\'t know. Use three sentences maximum and keep the answer concise.\n\nQuestion: {question} \n\nContext: {context} \n\nAnswer:"""')]),t._v("\n")])])]),a("h3",{attrs:{id:"_3-实际获取的提示词结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-实际获取的提示词结构"}},[t._v("#")]),t._v(" 3. 实际获取的提示词结构")]),t._v(" "),a("p",[t._v("您可以通过打印来查看具体内容：")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("prompt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pull"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rlm/rag-prompt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prompt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看整个提示词模板")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prompt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("input_variables"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看需要的输入变量")]),t._v("\n")])])]),a("p",[t._v("输出通常会显示：")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("输入变量")]),t._v("："),a("code",[t._v("['context', 'question']")])]),t._v(" "),a("li",[a("strong",[t._v("模板内容")]),t._v("：包含指导模型如何回答问题的指令")])]),t._v(" "),a("h3",{attrs:{id:"_4-为什么使用-hub-而不是硬编码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-为什么使用-hub-而不是硬编码"}},[t._v("#")]),t._v(" 4. 为什么使用 Hub 而不是硬编码？")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("方式")]),t._v(" "),a("th",[t._v("优点")]),t._v(" "),a("th",[t._v("缺点")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[a("code",[t._v("hub.pull()")])])]),t._v(" "),a("td",[t._v("• 可复用性"),a("br"),t._v("• 版本控制"),a("br"),t._v("• 社区最佳实践"),a("br"),t._v("• 易于更新和维护")]),t._v(" "),a("td",[t._v("• 需要网络连接"),a("br"),t._v("• 依赖外部服务")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("硬编码提示词")])]),t._v(" "),a("td",[t._v("• 离线可用"),a("br"),t._v("• 完全控制")]),t._v(" "),a("td",[t._v("• 难以维护"),a("br"),t._v("• 无法共享"),a("br"),t._v("• 容易过时")])])])]),t._v(" "),a("h3",{attrs:{id:"_5-等效的硬编码方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-等效的硬编码方式"}},[t._v("#")]),t._v(" 5. 等效的硬编码方式")]),t._v(" "),a("blockquote",[a("p",[t._v("看这里\n如果您不想依赖 Hub，可以这样实现：")])]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prompts "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ChatPromptTemplate\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 手动创建相同的提示词")]),t._v("\ntemplate "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""You are an assistant for question-answering tasks. Use the following pieces of retrieved context to answer the question. If you don\'t know the answer, just say that you don\'t know. Use three sentences maximum and keep the answer concise.\n\nQuestion: {question} \n\nContext: {context} \n\nAnswer:"""')]),t._v("\n\nprompt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ChatPromptTemplate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_template"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("template"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"_6-高级用法-版本控制和特定版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-高级用法-版本控制和特定版本"}},[t._v("#")]),t._v(" 6. 高级用法：版本控制和特定版本")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 拉取特定版本")]),t._v("\nprompt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pull"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rlm/rag-prompt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" version"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看所有可用版本")]),t._v("\nversions "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("list_versions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rlm/rag-prompt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"_7-在-rag-流程中的作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-在-rag-流程中的作用"}},[t._v("#")]),t._v(" 7. 在 RAG 流程中的作用")]),t._v(" "),a("p",[t._v("在您的代码中，这个提示词这样被使用：")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("rag_chain "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"context"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" retriever "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" format_docs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"question"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" RunnablePassthrough"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" prompt  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ← 这里使用拉取的提示词")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" llm\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" StrOutputParser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("流程是：")]),t._v(" "),a("ol",[a("li",[t._v("从向量数据库检索相关文档 ("),a("code",[t._v("retriever")]),t._v(")")]),t._v(" "),a("li",[t._v("格式化文档为字符串 ("),a("code",[t._v("format_docs")]),t._v(")")]),t._v(" "),a("li",[t._v("将"),a("strong",[t._v("问题")]),t._v("和"),a("strong",[t._v("上下文")]),t._v("填充到提示词模板中")]),t._v(" "),a("li",[t._v("发送给 LLM 生成答案")])]),t._v(" "),a("h2",{attrs:{id:"实践建议"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实践建议"}},[t._v("#")]),t._v(" 实践建议")]),t._v(" "),a("h3",{attrs:{id:"适合使用-hub-pull-的情况"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#适合使用-hub-pull-的情况"}},[t._v("#")]),t._v(" 适合使用 "),a("code",[t._v("hub.pull()")]),t._v(" 的情况：")]),t._v(" "),a("ul",[a("li",[t._v("快速原型开发")]),t._v(" "),a("li",[t._v("使用社区验证过的最佳实践")]),t._v(" "),a("li",[t._v("需要提示词版本管理的生产环境")])]),t._v(" "),a("h3",{attrs:{id:"适合手动创建提示词的情况"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#适合手动创建提示词的情况"}},[t._v("#")]),t._v(" 适合手动创建提示词的情况：")]),t._v(" "),a("ul",[a("li",[t._v("离线环境")]),t._v(" "),a("li",[t._v("需要高度定制化的提示词")]),t._v(" "),a("li",[t._v("对提示词有特殊安全要求的环境")])]),t._v(" "),a("h3",{attrs:{id:"检查网络连接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#检查网络连接"}},[t._v("#")]),t._v(" 检查网络连接：")]),t._v(" "),a("p",[t._v("如果遇到网络问题，可以这样处理：")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    prompt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pull"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rlm/rag-prompt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("except")]),t._v(" Exception "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"无法从 Hub 拉取提示词，使用本地备选方案"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用本地备选提示词")]),t._v("\n    template "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""..."""')]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 您的本地模板")]),t._v("\n    prompt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ChatPromptTemplate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_template"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("template"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("p",[a("code",[t._v('prompt = hub.pull("rlm/rag-prompt")')]),t._v(" 的作用是：")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("从中央仓库获取")]),t._v("一个专门为 RAG 任务设计的提示词模板")]),t._v(" "),a("li",[a("strong",[t._v("遵循最佳实践")]),t._v("：包含适当的指令和格式")]),t._v(" "),a("li",[a("strong",[t._v("提供标准化输入")]),t._v("：期望 "),a("code",[t._v("context")]),t._v(" 和 "),a("code",[t._v("question")]),t._v(" 两个变量")]),t._v(" "),a("li",[a("strong",[t._v("确保可重现性")]),t._v("：通过版本控制保证每次获取的提示词一致")])]),t._v(" "),a("p",[t._v("这是一种高效、可维护的方式来管理提示词，特别适合团队协作和生产环境部署。")])])}),[],!1,null,null,null);a.default=r.exports}}]);