(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{527:function(t,s,a){"use strict";a.r(s);var n=a(3),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"langchain-agent"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#langchain-agent"}},[t._v("#")]),t._v(" langchain Agent")]),t._v(" "),s("h3",{attrs:{id:"一、核心思想-从-工具-到-大脑"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、核心思想-从-工具-到-大脑"}},[t._v("#")]),t._v(" 一、核心思想：从“工具”到“大脑”")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("传统的链式调用 (Chain)")]),t._v("：像是"),s("strong",[t._v("一条自动化流水线")]),t._v("。你预先设计好固定的步骤，比如：查询 -> 检索 -> 合成答案。对于确定性的任务非常高效，但缺乏灵活性。如果任务超出预设流程，它就会失败。")]),t._v(" "),s("li",[s("strong",[t._v("智能体 (Agent)")]),t._v("：像是"),s("strong",[t._v("一个配备了工具和思考能力的人脑（LLM）")]),t._v("。\n"),s("ul",[s("li",[t._v("你告诉它一个目标（比如“帮我分析一下公司Q3的销售数据并总结成PPT”），它会自己"),s("strong",[t._v("思考")]),t._v("需要做什么、使用什么工具、按什么顺序执行，并能处理意外情况。")])])])]),t._v(" "),s("p",[s("strong",[t._v("核心概念")]),t._v("：Agent 是一个由大语言模型驱动的"),s("strong",[t._v("决策系统")]),t._v("。它的核心能力是"),s("strong",[t._v("使用工具")]),t._v("。LLM 作为代理的“大脑”，负责推理、规划和决策，而工具则是它完成任务所依赖的外部手段。")]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"二、agent-的关键组成部分"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、agent-的关键组成部分"}},[t._v("#")]),t._v(" 二、Agent 的关键组成部分")]),t._v(" "),s("p",[t._v("一个典型的 Agent 由以下四个核心部分构成：")]),t._v(" "),s("h4",{attrs:{id:"_1-代理-agent-本身-决策逻辑"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-代理-agent-本身-决策逻辑"}},[t._v("#")]),t._v(" 1. "),s("strong",[t._v("代理（Agent）本身：决策逻辑")])]),t._v(" "),s("p",[t._v("这是核心，它定义了 LLM 如何根据当前状态决定下一步行动。LangChain 提供了多种类型的代理，适用于不同场景：")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Zero-shot ReAct Agent")]),t._v("：最常用的一种。它只根据当前提示词（Prompt）进行推理，不记忆之前的操作步骤。适合单一任务。")]),t._v(" "),s("li",[s("strong",[t._v("Conversational Agent")]),t._v("：专为对话设计，它保留了聊天历史，能处理多轮交互中的上下文。")]),t._v(" "),s("li",[s("strong",[t._v("Self-ask with Search Agent")]),t._v("：一种特殊设计，擅长通过不断自问自答来分解复杂问题，通常与搜索引擎配合使用。")]),t._v(" "),s("li",[s("strong",[t._v("ReAct Document Store Agent")]),t._v("：专门为在文档库中寻找答案而优化。")])]),t._v(" "),s("h4",{attrs:{id:"_2-工具-tools-执行能力"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-工具-tools-执行能力"}},[t._v("#")]),t._v(" 2. "),s("strong",[t._v("工具（Tools）：执行能力")])]),t._v(" "),s("p",[t._v("工具是 Agent 可以调用的函数。它们是与外部世界交互的接口。任何能力都可以被封装成一个工具。例如：")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("搜索引擎")]),t._v("："),s("code",[t._v("GoogleSearchAPIWrapper")])]),t._v(" "),s("li",[s("strong",[t._v("计算器")]),t._v("：一个简单的数学计算函数")]),t._v(" "),s("li",[s("strong",[t._v("Python 解释器")]),t._v("：执行代码来验证或计算复杂公式")]),t._v(" "),s("li",[s("strong",[t._v("数据库查询器")]),t._v("：执行 SQL 查询")]),t._v(" "),s("li",[s("strong",[t._v("自定义 API")]),t._v("：调用公司内部的任何 API")])]),t._v(" "),s("h4",{attrs:{id:"_3-工具包-toolkits-工具的集合"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-工具包-toolkits-工具的集合"}},[t._v("#")]),t._v(" 3. "),s("strong",[t._v("工具包（Toolkits）：工具的集合")])]),t._v(" "),s("p",[t._v("将完成一个特定领域任务所需的一组工具打包在一起。例如，一个“SQL 工具包”可能包含："),s("code",[t._v("sql_db_query")]),t._v(", "),s("code",[t._v("sql_db_schema")]),t._v(", "),s("code",[t._v("sql_db_list_tables")]),t._v(" 等工具。")]),t._v(" "),s("h4",{attrs:{id:"_4-代理执行器-agent-executor-运行时环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-代理执行器-agent-executor-运行时环境"}},[t._v("#")]),t._v(" 4. "),s("strong",[t._v("代理执行器（Agent Executor）：运行时环境")])]),t._v(" "),s("p",[t._v("这是驱动 Agent 运行的“引擎”。它负责：")]),t._v(" "),s("ul",[s("li",[t._v("调用 Agent 进行决策。")]),t._v(" "),s("li",[t._v("执行 Agent 选择的工具。")]),t._v(" "),s("li",[t._v("将工具的执行结果返回给 Agent，作为下一步决策的上下文。")]),t._v(" "),s("li",[t._v("处理错误、控制循环、防止无限循环。")])]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"三、agent-的工作流程-react-框架"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、agent-的工作流程-react-框架"}},[t._v("#")]),t._v(" 三、Agent 的工作流程（ReAct 框架）")]),t._v(" "),s("p",[t._v("最经典的 Agent 工作模式是 "),s("strong",[t._v("ReAct")]),t._v("，即 "),s("strong",[t._v("Reason（推理）")]),t._v(" + "),s("strong",[t._v("Act（行动）")]),t._v("。")]),t._v(" "),s("p",[t._v("假设我们有一个问题："),s("strong",[t._v("“埃隆·马斯克的公司特斯拉目前股价是多少？换算成人民币是多少？”")])]),t._v(" "),s("p",[t._v("Agent 的工作流程如下：")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("输入问题")]),t._v("：将问题传递给 Agent。")]),t._v(" "),s("li",[s("strong",[t._v("思考（Reason）")]),t._v("：LLM 分析问题，并规划步骤。\n"),s("ul",[s("li",[s("em",[t._v("想法")]),t._v("：要回答这个问题，我需要先获取特斯拉的当前股价（美元），然后找到当前的美元对人民币汇率，最后进行换算。")])])]),t._v(" "),s("li",[s("strong",[t._v("行动（Act）")]),t._v("：LLM 决定调用哪个工具，并生成调用参数。\n"),s("ul",[s("li",[s("em",[t._v("行动")]),t._v("：调用 "),s("code",[t._v("stock_price")]),t._v(" 工具，参数为 "),s("code",[t._v('"TSLA"')]),t._v("。")])])]),t._v(" "),s("li",[s("strong",[t._v("观察（Observe）")]),t._v("：Agent 执行器执行工具，并获得结果。\n"),s("ul",[s("li",[s("em",[t._v("观察")]),t._v("："),s("code",[t._v("TSLA 股价为 250.00 美元")]),t._v("。")])])]),t._v(" "),s("li",[s("strong",[t._v("再思考（Reason）")]),t._v("：LLM 结合上一步的观察，进行下一步推理。\n"),s("ul",[s("li",[s("em",[t._v("想法")]),t._v("：好的，我拿到了股价是 250 美元。现在我需要获取汇率。")])])]),t._v(" "),s("li",[s("strong",[t._v("再行动（Act）")]),t._v("：LLM 决定调用下一个工具。\n"),s("ul",[s("li",[s("em",[t._v("行动")]),t._v("：调用 "),s("code",[t._v("currency_exchange")]),t._v(" 工具，参数为 "),s("code",[t._v('{"from": "USD", "to": "CNY"}')]),t._v("。")])])]),t._v(" "),s("li",[s("strong",[t._v("再观察（Observe）")]),t._v("：Agent 执行器再次执行工具。\n"),s("ul",[s("li",[s("em",[t._v("观察")]),t._v("："),s("code",[t._v("1 美元 = 7.25 人民币")]),t._v("。")])])]),t._v(" "),s("li",[s("strong",[t._v("最终思考与回答")]),t._v("：LLM 认为已经获得了所有必要信息，不再调用工具，而是直接合成最终答案。\n"),s("ul",[s("li",[s("em",[t._v("最终答案")]),t._v("：特斯拉当前股价为 250.00 美元。根据当前汇率（1 USD = 7.25 CNY），换算成人民币大约是 1812.50 元。")])])])]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"四、代码示例-创建一个简单的-agent"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、代码示例-创建一个简单的-agent"}},[t._v("#")]),t._v(" 四、代码示例：创建一个简单的 Agent")]),t._v(" "),s("p",[t._v("下面我们用一个具体的代码示例来演示如何创建一个能回答上述问题的 Agent。")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 首先安装必要的库")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# !pip install langchain-openai langchain langchain-community")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" os\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("agents "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" AgentType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" initialize_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Tool\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_openai "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ChatOpenAI\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utilities "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" GoogleSearchAPIWrapper\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tools "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" BaseTool\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" typing "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Type\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" pydantic "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" BaseModel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Field\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置OpenAI API Key")]),t._v("\nos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("environ"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OPENAI_API_KEY"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"你的OpenAI API Key"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1. 定义自定义工具：汇率换算（这里用模拟函数代替真实API）")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CurrencyConversionInput")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("BaseModel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("float")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Field"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"要换算的金额"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    from_currency"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Field"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"原货币代码，如 USD"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    to_currency"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Field"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"目标货币代码，如 CNY"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CurrencyConversionTool")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("BaseTool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"currency_converter"')]),t._v("\n    description "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"用于将一种货币换算成另一种货币。输入应包含金额、原货币和目标货币。"')]),t._v("\n    args_schema"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("BaseModel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" CurrencyConversionInput\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("float")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" from_currency"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" to_currency"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 模拟汇率数据（实际应用中应调用真实API）")]),t._v("\n        exchange_rates "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"USD_CNY"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.25")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"EUR_CNY"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        key "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("from_currency"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("_")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("to_currency"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),t._v("\n        rate "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" exchange_rates"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" rate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            converted_amount "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" amount "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" rate\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("from_currency"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" = ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("converted_amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token format-spec"}},[t._v(".2f")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("to_currency"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" (汇率: ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("rate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(')"')])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"找不到从 ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("from_currency"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" 到 ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("to_currency"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(' 的汇率信息。"')])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2. 初始化LLM（使用GPT-3.5-turbo，因为它足够智能且成本较低）")]),t._v("\nllm "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ChatOpenAI"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gpt-3.5-turbo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" temperature"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 3. 定义工具列表")]),t._v("\ntools "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 工具1：谷歌搜索（需要配置GOOGLE_API_KEY和GOOGLE_CSE_ID）")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Tool(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#     name="google_search",')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     func=GoogleSearchAPIWrapper().run,")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#     description="用于搜索当前事件或事实信息。"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ),")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 工具2：我们自定义的汇率换算工具")]),t._v("\n    CurrencyConversionTool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 工具3：可以再添加一个计算器工具用于数学计算")]),t._v("\n    Tool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Calculator"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        func"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("lambda")]),t._v(" x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("eval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 简单演示，实际应用请使用更安全的计算库")]),t._v("\n        description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"用于执行数学计算，例如：'2 * 3' 或 '250 * 7.25'。\"")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 4. 初始化Agent")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用 ZERO_SHOT_REACT_DESCRIPTION 代理类型，它根据工具的描述来决定使用哪个工具。")]),t._v("\nagent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" initialize_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    tools"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    llm"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("llm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    agent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("AgentType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ZERO_SHOT_REACT_DESCRIPTION"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 最常用的代理类型")]),t._v("\n    verbose"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开启详细日志，可以看到Agent的思考过程！")]),t._v("\n    handle_parsing_errors"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 优雅地处理解析错误")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 5. 运行Agent！")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 问题1：需要多步推理和工具使用")]),t._v("\n    result1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("run"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"如果我有100美元，按照今天的汇率能换成多少人民币？"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"答案： ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("result1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\n"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"="')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 问题2：涉及计算")]),t._v("\n    result2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("run"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"100的平方加上50的三分之一是多少？"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"答案： ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("result2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("except")]),t._v(" Exception "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"发生错误：')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[s("strong",[t._v("运行上述代码，当 "),s("code",[t._v("verbose=True")]),t._v(" 时，你会在控制台看到类似以下的思考过程：")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('> Entering new AgentExecutor chain...\n 我需要将100美元换算成人民币。我应该使用汇率换算工具。\n 行动：currency_converter\n 行动输入：{"amount": 100, "from_currency": "USD", "to_currency": "CNY"}\n 观察：100 USD = 725.00 CNY (汇率: 7.25)\n 思考：我已经得到了换算结果。\n 最终答案：100美元按照今天的汇率（1美元=7.25人民币）可以兑换成725.00元人民币。\n\n> Finished chain.\n答案： 100美元按照今天的汇率（1美元=7.25人民币）可以兑换成725.00元人民币。\n')])])]),s("h3",{attrs:{id:"五、总结-agent-的优势与挑战"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#五、总结-agent-的优势与挑战"}},[t._v("#")]),t._v(" 五、总结：Agent 的优势与挑战")]),t._v(" "),s("p",[s("strong",[t._v("优势：")])]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("强大灵活")]),t._v("：能够完成需要多步骤、动态决策的复杂任务。")]),t._v(" "),s("li",[s("strong",[t._v("扩展性强")]),t._v("：通过工具，LLM 的能力被无限扩展，可以操作现实世界中的各种系统。")]),t._v(" "),s("li",[s("strong",[t._v("自动化")]),t._v("：将复杂工作流自动化，减少人工干预。")])]),t._v(" "),s("p",[s("strong",[t._v("挑战与注意事项：")])]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("延迟与成本")]),t._v("：每一步都需要调用LLM，可能比Chain慢且贵。")]),t._v(" "),s("li",[s("strong",[t._v("可靠性")]),t._v("：LLM可能做出错误的决策或生成错误的工具参数，需要完善的错误处理。")]),t._v(" "),s("li",[s("strong",[t._v("安全性")]),t._v("：让LLM自主调用工具存在潜在风险，必须严格控制工具的权限。")]),t._v(" "),s("li",[s("strong",[t._v("调试复杂")]),t._v("：由于决策路径不确定，调试比固定的Chain更困难。")])]),t._v(" "),s("p",[s("strong",[t._v("LangChain Agent 是将 LLM 从一個“无所不知但无能为力”的百科全书，转变为一个“善于规划并动手执行”的智能助手的关键技术。")])]),t._v(" "),s("ul",[s("li",[t._v("在选择使用 Chain 还是 Agent 时，一个简单的原则是：如果任务流程是固定的，用 Chain；")]),t._v(" "),s("li",[t._v("如果任务需要动态规划和工具使用，就用 Agent。")])]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"_1-langchain-agent的概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-langchain-agent的概念"}},[t._v("#")]),t._v(" 1. langchain Agent的概念?")]),t._v(" "),s("ul",[s("li",[t._v("是一个基于大模型的智能体，它可以根据用户的输入，生成符合用户需求的文本")]),t._v(" "),s("li",[t._v("它的核心思想是，将大模型的能力，与用户的输入，进行结合，生成符合用户需求的文本")]),t._v(" "),s("li",[t._v("它的劣势是，它的计算复杂度较高")])]),t._v(" "),s("h3",{attrs:{id:"_2-核心概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-核心概念"}},[t._v("#")]),t._v(" 2. 核心概念")]),t._v(" "),s("ul",[s("li",[t._v("Agent 是一个由大语言模型驱动的决策系统。")]),t._v(" "),s("li",[t._v("它的核心能力是使用工具。")]),t._v(" "),s("li",[t._v("LLM 作为代理的“大脑”，负责推理、规划和决策，而工具则是它完成任务所依赖的外部手段。")])]),t._v(" "),s("blockquote",[s("p",[t._v("核心逻辑")])]),t._v(" "),s("p",[t._v("感知--\x3e决策--\x3e执行")]),t._v(" "),s("h3",{attrs:{id:"_3-关键特性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-关键特性"}},[t._v("#")]),t._v(" 3. 关键特性")]),t._v(" "),s("ol",[s("li",[t._v("自主性")]),t._v(" "),s("li",[t._v("工具调用能力")]),t._v(" "),s("li",[t._v("记忆与反馈")])]),t._v(" "),s("h2",{attrs:{id:"langchain-memory"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#langchain-memory"}},[t._v("#")]),t._v(" LangChain Memory")]),t._v(" "),s("h3",{attrs:{id:"_1-from-langchain-memory-import-conversationbuffermemory"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-from-langchain-memory-import-conversationbuffermemory"}},[t._v("#")]),t._v(" 1. from langchain.memory import ConversationBufferMemory")]),t._v(" "),s("p",[t._v("langchain 中 ConversationBufferMemory  这个类的作用")]),t._v(" "),s("ol",[s("li",[t._v("记忆对话历史")])]),t._v(" "),s("p",[s("code",[t._v("ConversationBufferMemory")]),t._v(' 就像一个"对话记录本"，它会自动保存用户和AI之间的所有对话记录。')]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("提供对话上下文")])]),t._v(" "),s("p",[t._v("当进行新的对话时，内存会将历史记录作为上下文提供给LLM：")]),t._v(" "),s("h3",{attrs:{id:"_2-from-langchain-agents-import-agenttype-initialize-agent-tool"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-from-langchain-agents-import-agenttype-initialize-agent-tool"}},[t._v("#")]),t._v(" 2. from langchain.agents import AgentType, initialize_agent, Tool")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("initialize_agent")]),t._v(" 这个函数的使用")])]),t._v(" "),s("h1",{attrs:{id:"langchain-agent-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#langchain-agent-2"}},[t._v("#")]),t._v(" langchain.agent")]),t._v(" "),s("blockquote",[s("p",[t._v("from langchain.agents import AgentType, initialize_agent, Tool")])]),t._v(" "),s("p",[t._v("我来详细解释这些函数的作用，并提供版本信息。")]),t._v(" "),s("h2",{attrs:{id:"_1-agenttype-agent类型枚举"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-agenttype-agent类型枚举"}},[t._v("#")]),t._v(" 1. "),s("code",[t._v("AgentType")]),t._v(" - Agent类型枚举")]),t._v(" "),s("h3",{attrs:{id:"作用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作用"}},[t._v("#")]),t._v(" 作用：")]),t._v(" "),s("p",[t._v("定义不同类型的Agent策略，每种类型对应不同的推理和执行方式。")]),t._v(" "),s("h3",{attrs:{id:"常用的agenttype"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用的agenttype"}},[t._v("#")]),t._v(" 常用的AgentType：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("agents "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" AgentType\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 主要类型示例：")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AgentType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ZERO_SHOT_REACT_DESCRIPTION"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "zero-shot-react-description"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AgentType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OPENAI_FUNCTIONS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("                   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "openai-functions"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AgentType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("STRUCTURED_CHAT_ZERO_SHOT_REACT_DESCRIPTION"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "structured-chat-zero-shot-react-description"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AgentType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CONVERSATIONAL_REACT_DESCRIPTION"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "conversational-react-description"')]),t._v("\n")])])]),s("h3",{attrs:{id:"各种类型的特点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#各种类型的特点"}},[t._v("#")]),t._v(" 各种类型的特点：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("AgentType")]),t._v(" "),s("th",[t._v("特点")]),t._v(" "),s("th",[t._v("适用场景")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("ZERO_SHOT_REACT_DESCRIPTION")])]),t._v(" "),s("td",[t._v("零样本学习，基于工具描述")]),t._v(" "),s("td",[t._v("简单任务，无记忆")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("OPENAI_FUNCTIONS")])]),t._v(" "),s("td",[t._v("使用OpenAI函数调用")]),t._v(" "),s("td",[t._v("与OpenAI模型配合最佳")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("STRUCTURED_CHAT_ZERO_SHOT_REACT_DESCRIPTION")])]),t._v(" "),s("td",[t._v("支持结构化输入")]),t._v(" "),s("td",[t._v("复杂任务，需要严格格式")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("CONVERSATIONAL_REACT_DESCRIPTION")])]),t._v(" "),s("td",[t._v("支持对话记忆")]),t._v(" "),s("td",[t._v("多轮对话场景")])])])]),t._v(" "),s("h2",{attrs:{id:"_2-tool-工具类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-tool-工具类"}},[t._v("#")]),t._v(" 2. "),s("code",[t._v("Tool")]),t._v(" - 工具类")]),t._v(" "),s("h3",{attrs:{id:"作用-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作用-2"}},[t._v("#")]),t._v(" 作用：")]),t._v(" "),s("p",[t._v("将函数封装成Agent可以调用的工具。")]),t._v(" "),s("h3",{attrs:{id:"基本用法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本用法"}},[t._v("#")]),t._v(" 基本用法：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tools "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Tool\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" pydantic "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" BaseModel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Field\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 定义输入参数模型")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CalculatorInput")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("BaseModel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    expression"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Field"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"数学表达式，如 '2 + 2'\"")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建工具函数")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("calculator")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("expression"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""执行数学计算"""')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("eval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("expression"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"结果: ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("except")]),t._v(" Exception "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"计算错误: ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建Tool实例")]),t._v("\ncalc_tool "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Tool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Calculator"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"用于执行数学计算"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    func"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("calculator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    args_schema"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("CalculatorInput  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 可选：定义参数格式")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"tool参数说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tool参数说明"}},[t._v("#")]),t._v(" Tool参数说明：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("Tool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"工具名称"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("           "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 工具标识")]),t._v("\n    description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"工具描述"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Agent根据描述选择工具")]),t._v("\n    func"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("工具函数"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 实际执行的函数")]),t._v("\n    args_schema"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("参数模型"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 可选：参数验证")]),t._v("\n    return_direct"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("False")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 是否直接返回结果")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"_3-initialize-agent-初始化agent"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-initialize-agent-初始化agent"}},[t._v("#")]),t._v(" 3. "),s("code",[t._v("initialize_agent")]),t._v(" - 初始化Agent")]),t._v(" "),s("h3",{attrs:{id:"作用-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作用-3"}},[t._v("#")]),t._v(" 作用：")]),t._v(" "),s("p",[t._v("将LLM、工具、记忆等组件组合成一个可用的Agent。")]),t._v(" "),s("h3",{attrs:{id:"基本用法-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本用法-2"}},[t._v("#")]),t._v(" 基本用法：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("agents "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" initialize_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" AgentType\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tools "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Tool\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_openai "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ChatOpenAI\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1. 准备组件")]),t._v("\nllm "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ChatOpenAI"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gpt-3.5-turbo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ntools "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("calc_tool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" search_tool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 工具列表")]),t._v("\nmemory "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ConversationBufferMemory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 记忆组件")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2. 初始化Agent")]),t._v("\nagent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" initialize_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    tools"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    llm"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("llm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    agent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("AgentType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OPENAI_FUNCTIONS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Agent类型")]),t._v("\n    memory"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("memory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 可选：记忆")]),t._v("\n    verbose"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 是否显示详细过程")]),t._v("\n    handle_parsing_errors"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 是否处理解析错误")]),t._v("\n    max_iterations"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 最大迭代次数")]),t._v("\n    early_stopping_method"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"generate"')]),t._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 停止条件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"完整参数示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#完整参数示例"}},[t._v("#")]),t._v(" 完整参数示例：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("agent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" initialize_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    tools"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                           "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 工具列表")]),t._v("\n    llm"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("llm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                              "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 语言模型")]),t._v("\n    agent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("AgentType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OPENAI_FUNCTIONS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Agent策略类型")]),t._v("\n    memory"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("memory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 记忆组件")]),t._v("\n    verbose"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 详细日志")]),t._v("\n    handle_parsing_errors"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("           "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 错误处理")]),t._v("\n    max_iterations"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 防止无限循环")]),t._v("\n    early_stopping_method"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"generate"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 停止方法")]),t._v("\n    agent_kwargs"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("                        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Agent额外参数")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'prefix'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'你是一个助手...'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 系统提示词")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'suffix'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'开始任务...'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 结束提示词")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'format_instructions'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'...'")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 格式指令")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"_4-版本信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-版本信息"}},[t._v("#")]),t._v(" 4. 版本信息")]),t._v(" "),s("h3",{attrs:{id:"initialize-agent-所在的langchain版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#initialize-agent-所在的langchain版本"}},[t._v("#")]),t._v(" "),s("code",[t._v("initialize_agent")]),t._v(" 所在的LangChain版本：")]),t._v(" "),s("p",[s("strong",[t._v("主要版本演进：")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("版本范围")]),t._v(" "),s("th",[t._v("特点")]),t._v(" "),s("th",[s("code",[t._v("initialize_agent")]),t._v(" 状态")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("< 0.1.0")]),t._v(" (早期版本)")]),t._v(" "),s("td",[t._v("实验性API")]),t._v(" "),s("td",[t._v("存在但不稳定")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("0.1.x")])]),t._v(" "),s("td",[t._v("正式发布")]),t._v(" "),s("td",[t._v("稳定可用")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("≥ 0.2.0")])]),t._v(" "),s("td",[t._v("模块化重构")]),t._v(" "),s("td",[t._v("仍然存在，但推荐新方法")])])])]),t._v(" "),s("h3",{attrs:{id:"当前推荐的使用方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#当前推荐的使用方式"}},[t._v("#")]),t._v(" 当前推荐的使用方式：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 方式1：传统的initialize_agent（仍然可用）")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("agents "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" initialize_agent\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 方式2：新的推荐方式（LangChain ≥ 0.2.0）")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("agents "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" create_openai_functions_agent\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("agents "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" AgentExecutor\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建Agent")]),t._v("\nagent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" create_openai_functions_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("llm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" system_message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建执行器")]),t._v("\nagent_executor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" AgentExecutor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("agent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tools"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" verbose"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"检查你的langchain版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#检查你的langchain版本"}},[t._v("#")]),t._v(" 检查你的LangChain版本：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" langchain\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"LangChain版本: ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__version__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装特定版本")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# pip install langchain==0.1.0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# pip install langchain>=0.2.0")]),t._v("\n")])])]),s("h2",{attrs:{id:"_5-完整工作示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-完整工作示例"}},[t._v("#")]),t._v(" 5. 完整工作示例")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("agents "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" initialize_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" AgentType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Tool\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_openai "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ChatOpenAI\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("memory "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ConversationBufferMemory\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" pandas "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" pd\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1. 准备数据")]),t._v("\ndf "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("read_csv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"titanic.csv"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2. 创建工具")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("data_summary")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("query"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""数据统计摘要工具"""')]),t._v("\n    numeric_cols "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" df"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("select_dtypes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("include"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'number'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("columns\n    summary "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" df"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("numeric_cols"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("describe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"统计摘要:\\n')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("summary"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),t._v("\n\nsummary_tool "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Tool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"DataSummary"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"获取数据的统计摘要"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    func"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("data_summary\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 3. 初始化Agent")]),t._v("\nllm "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ChatOpenAI"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gpt-3.5-turbo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ntools "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("summary_tool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nmemory "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ConversationBufferMemory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nagent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" initialize_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    tools"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    llm"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("llm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    agent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("AgentType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OPENAI_FUNCTIONS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    memory"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("memory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    verbose"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 4. 使用Agent")]),t._v("\nresult "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("run"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"请分析数据的统计特征"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("ul",[s("li",[s("strong",[s("code",[t._v("AgentType")])]),t._v(": 定义Agent的推理策略类型")]),t._v(" "),s("li",[s("strong",[s("code",[t._v("Tool")])]),t._v(": 将函数封装成Agent可调用的工具")]),t._v(" "),s("li",[s("strong",[s("code",[t._v("initialize_agent")])]),t._v(": 核心函数，将各个组件组合成可用的Agent")]),t._v(" "),s("li",[s("strong",[t._v("版本")]),t._v(": "),s("code",[t._v("initialize_agent")]),t._v(" 在 LangChain 0.1.x 和 0.2.x 中都可用，但新版本推荐使用更模块化的方式")])]),t._v(" "),s("p",[t._v("这些组件共同构成了LangChain Agent框架的核心，让你能够创建智能的、可工具调用的AI助手。")]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("initialize_agent")]),t._v(" 虽然在新版本里依旧可以用，但推荐新方法："),s("code",[t._v("create_openai_functions_agent")])])]),t._v(" "),s("h2",{attrs:{id:"如何使用langchain-的各个核心组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何使用langchain-的各个核心组件"}},[t._v("#")]),t._v(" 如何使用langchain 的各个核心组件")]),t._v(" "),s("blockquote",[s("p",[t._v("该从哪里导入")])]),t._v(" "),s("div",{staticClass:"language-py extra-class"},[s("pre",{pre:!0,attrs:{class:"language-py"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prompts "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ChatPromptTemplate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" MessagesPlaceholder\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("llms "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" LLM\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("embeddings "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Embeddings\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("vectorstores "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" VectorStoreRetriever\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("output_parsers "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" StrOutputParser\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("runnables "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" RunnablePassthrough\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_chat_models "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ChatOpenAI\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_openai "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ChatOpenAI\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_embeddings "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" HuggingFaceEmbeddings\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_vectorstores "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Chroma\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_hub "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" pull\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("agents "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" create_openai_functions_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" AgentExecutor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" AgentType\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tools "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Tool\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("memory "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ConversationBufferMemory\n\n")])])]),s("h2",{attrs:{id:"注意langchain-不同版本-initialize-agent-函数的参数可能会有差异-建议查看对应版本的文档。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注意langchain-不同版本-initialize-agent-函数的参数可能会有差异-建议查看对应版本的文档。"}},[t._v("#")]),t._v(" 注意langchain 不同版本，"),s("code",[t._v("initialize_agent")]),t._v(" 函数的参数可能会有差异，建议查看对应版本的文档。")]),t._v(" "),s("blockquote",[s("p",[t._v("不同版本，可能缺少某些核心组件， 建议查看对应版本的文档。")])]),t._v(" "),s("p",[t._v("eg:")]),t._v(" "),s("h3",{attrs:{id:"版本兼容性对照表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#版本兼容性对照表"}},[t._v("#")]),t._v(" 版本兼容性对照表")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("LangChain版本")]),t._v(" "),s("th",[t._v("导入方式")]),t._v(" "),s("th",[t._v("状态")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("< 0.0.340")])]),t._v(" "),s("td",[s("code",[t._v("from langchain_experimental.agents import...")])]),t._v(" "),s("td",[t._v("✅ 可用")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("0.0.340 - 0.0.350")])]),t._v(" "),s("td",[s("code",[t._v("from langchain_experimental.agents import...")])]),t._v(" "),s("td",[t._v("✅ 可用")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("≥ 0.1.0")])]),t._v(" "),s("td",[s("code",[t._v("from langchain.agents import create_pandas_dataframe_agent")])]),t._v(" "),s("td",[t._v("✅ 推荐")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("≥ 0.2.0")])]),t._v(" "),s("td",[s("code",[t._v("from langchain_experimental.agents import...")])]),t._v(" "),s("td",[t._v("❌ 已移除")])])])]),t._v(" "),s("h2",{attrs:{id:"查看langchain-版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看langchain-版本"}},[t._v("#")]),t._v(" 查看langchain 版本")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" langchain\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"LangChain版本: ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__version__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"使用-create-openai-functions-agent"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-create-openai-functions-agent"}},[t._v("#")]),t._v(" 使用： create_openai_functions_agent")]),t._v(" "),s("h3",{attrs:{id:"新版本方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#新版本方式"}},[t._v("#")]),t._v(" 新版本方式")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("agents "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" create_openai_functions_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" AgentExecutor\nagent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" create_openai_functions_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("llm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prompt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nexecutor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" AgentExecutor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    agent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    tools"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    memory"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("memory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    verbose"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" executor\n")])])]),s("h3",{attrs:{id:"提示词模板缺少必需的-agent-scratchpad-变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#提示词模板缺少必需的-agent-scratchpad-变量"}},[t._v("#")]),t._v(" 提示词模板缺少必需的 agent_scratchpad 变量")]),t._v(" "),s("p",[t._v("这个错误是因为提示词模板缺少必需的 "),s("code",[t._v("agent_scratchpad")]),t._v(" 变量。以下是修复代码：")]),t._v(" "),s("h2",{attrs:{id:"修复方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修复方案"}},[t._v("#")]),t._v(" 修复方案")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prompts "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ChatPromptTemplate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" MessagesPlaceholder\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建包含必需变量的提示词模板")]),t._v("\nprompt "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ChatPromptTemplate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_messages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"system"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_get_system_prompt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"human"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{input}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    MessagesPlaceholder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("variable_name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"agent_scratchpad"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 必需变量")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nagent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" create_openai_functions_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    tools"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    llm"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("llm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    prompt"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("prompt\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"如果需要支持多轮对话-添加记忆变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如果需要支持多轮对话-添加记忆变量"}},[t._v("#")]),t._v(" 如果需要支持多轮对话，添加记忆变量：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("prompt "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ChatPromptTemplate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_messages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"system"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_get_system_prompt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    MessagesPlaceholder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("variable_name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"chat_history"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 记忆变量")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"human"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{input}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    MessagesPlaceholder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("variable_name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"agent_scratchpad"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 必需变量")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"完整的必需变量模板"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#完整的必需变量模板"}},[t._v("#")]),t._v(" 完整的必需变量模板：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("prompt "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ChatPromptTemplate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_messages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"system"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"系统提示词"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    MessagesPlaceholder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("variable_name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"chat_history"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 可选：记忆")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"human"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{input}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                                  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 必需：用户输入")]),t._v("\n    MessagesPlaceholder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("variable_name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"agent_scratchpad"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 必需：Agent思考过程")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[s("strong",[t._v("关键是要包含 "),s("code",[t._v("agent_scratchpad")]),t._v(" 这个必需的占位符。")])]),t._v(" "),s("h2",{attrs:{id:"使用react-agent"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用react-agent"}},[t._v("#")]),t._v(" 使用ReAct agent")]),t._v(" "),s("p",[t._v("Reasoning + Action 推理+行动")]),t._v(" "),s("p",[s("code",[t._v("create_react_agent")]),t._v(" 是 LangChain 中一个非常强大的工具，它实现了 "),s("strong",[t._v("ReAct（Reasoning + Acting）")]),t._v(' 框架，让 LLM 能够通过"思考-行动"循环来解决问题。')]),t._v(" "),s("h2",{attrs:{id:"🎯-react-代理的核心思想"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#🎯-react-代理的核心思想"}},[t._v("#")]),t._v(" 🎯 ReAct 代理的核心思想")]),t._v(" "),s("p",[t._v("ReAct 代理通过交替进行：")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Reasoning（推理）")]),t._v("：分析当前情况，决定下一步行动")]),t._v(" "),s("li",[s("strong",[t._v("Acting（行动）")]),t._v("：执行工具调用与环境交互")])]),t._v(" "),s("h2",{attrs:{id:"🔧-基本用法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#🔧-基本用法"}},[t._v("#")]),t._v(" 🔧 基本用法")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("agents "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" create_react_agent\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" hub\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("agents "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" AgentExecutor\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_community"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tools "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Tool\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_community"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utilities "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" SerpAPIWrapper\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_openai "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ChatOpenAI\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" os\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1. 定义工具")]),t._v("\nsearch "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" SerpAPIWrapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ncalculator "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Tool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Calculator"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    func"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("lambda")]),t._v(" x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("eval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 简单计算器")]),t._v("\n    description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"用于数学计算，输入数学表达式如 '2 + 3 * 4'\"")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ntools "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    Tool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Search"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        func"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("search"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("run"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"用于搜索当前事件或事实信息"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    calculator\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2. 获取 ReAct 提示模板")]),t._v("\nprompt "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pull"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hwchase17/react"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 3. 创建 LLM")]),t._v("\nllm "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ChatOpenAI"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gpt-3.5-turbo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" temperature"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 4. 创建 ReAct 代理")]),t._v("\nagent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" create_react_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("llm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prompt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 5. 创建代理执行器")]),t._v("\nagent_executor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" AgentExecutor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    agent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    tools"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    verbose"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    handle_parsing_errors"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 6. 运行代理")]),t._v("\nresult "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" agent_executor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("invoke"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"input"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"姚明现在的身高是多少？用计算器计算他比普通人高多少厘米？"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"output"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"📝-完整工作流程示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#📝-完整工作流程示例"}},[t._v("#")]),t._v(" 📝 完整工作流程示例")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("agents "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" create_react_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" AgentExecutor\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" hub\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_community"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tools "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Tool\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_openai "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ChatOpenAI\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" datetime "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" datetime\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" requests\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" json\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CustomTools")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""自定义工具集"""')]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@staticmethod")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_weather")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("city"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""获取天气信息（模拟）"""')]),t._v("\n        weather_data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"北京"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"晴，15°C"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"上海"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"多云，18°C"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"深圳"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"雨，22°C"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" weather_data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("city"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"找不到')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("city"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('的天气信息"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@staticmethod")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_current_time")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("query"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""获取当前时间"""')]),t._v("\n        now "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" datetime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("now"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"当前时间是: ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("now"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("strftime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%Y-%m-%d %H:%M:%S'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@staticmethod")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currency_converter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""货币转换（模拟）"""')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            amount_num "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("float")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("amount_num"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" 美元 ≈ ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("amount_num "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token format-spec"}},[t._v(".2f")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(' 人民币"')])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("except")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"请输入有效的金额"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建工具列表")]),t._v("\ntools "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    Tool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GetWeather"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        func"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("CustomTools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_weather"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"获取城市天气信息，输入格式：'北京'\"")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Tool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GetTime"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        func"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("CustomTools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_current_time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"获取当前时间，输入格式：'现在几点了'\"")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Tool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CurrencyConverter"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        func"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("CustomTools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("currency_converter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"美元转人民币，输入格式：'100'\"")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create_advanced_react_agent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""创建高级 ReAct 代理"""')]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 加载 ReAct 提示模板")]),t._v("\n    prompt "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pull"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hwchase17/react"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建 LLM")]),t._v("\n    llm "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ChatOpenAI"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        model"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gpt-3.5-turbo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        temperature"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        openai_api_key"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OPENAI_API_KEY"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建代理")]),t._v("\n    agent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" create_react_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("llm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prompt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建执行器")]),t._v("\n    agent_executor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" AgentExecutor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        agent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        tools"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        verbose"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        handle_parsing_errors"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        max_iterations"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 最大迭代次数")]),t._v("\n        early_stopping_method"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"generate"')]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 提前停止策略")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" agent_executor\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用代理")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run_examples")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    agent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" create_advanced_react_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    examples "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"现在北京天气怎么样？告诉我当前时间，然后计算100美元等于多少人民币？"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"先获取上海天气，再告诉我现在的时间"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"计算50美元能换多少人民币，然后告诉我深圳的天气"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" example "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("enumerate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("examples"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"\\n')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'='")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"示例 ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(": ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("example"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'='")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("invoke"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"input"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" example"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"最终答案: ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'output'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("except")]),t._v(" Exception "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"执行出错: ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"__main__"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    run_examples"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"🎨-自定义提示模板"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#🎨-自定义提示模板"}},[t._v("#")]),t._v(" 🎨 自定义提示模板")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prompts "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" PromptTemplate\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 自定义 ReAct 提示模板")]),t._v("\ncustom_react_prompt "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" PromptTemplate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    template"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""你是一个智能助手，能够使用工具解决问题。按照以下格式回答：\n\n问题: {input}\n\n思考: 我需要分析问题并决定使用哪个工具\n行动: 工具名称\n行动输入: 工具输入\n观察: 工具返回的结果\n\n...（这个循环可以重复多次）\n\n思考: 我现在有足够信息回答问题了\n最终答案: 最终答案\n\n开始！\n\n问题: {input}\n{agent_scratchpad}"""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    input_variables"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"input"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"agent_scratchpad"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用自定义提示创建代理")]),t._v("\ncustom_agent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" create_react_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    llm"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("llm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    tools"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    prompt"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("custom_react_prompt\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"🔧-高级配置选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#🔧-高级配置选项"}},[t._v("#")]),t._v(" 🔧 高级配置选项")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("agents "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" AgentExecutor\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create_robust_react_agent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""创建健壮的 ReAct 代理"""')]),t._v("\n    \n    prompt "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pull"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hwchase17/react"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    llm "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ChatOpenAI"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gpt-3.5-turbo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" temperature"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    agent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" create_react_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("llm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prompt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 高级执行器配置")]),t._v("\n    agent_executor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" AgentExecutor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        agent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        tools"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        verbose"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        handle_parsing_errors"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        max_iterations"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("           "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 增加最大迭代次数")]),t._v("\n        max_execution_time"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 最大执行时间（秒）")]),t._v("\n        early_stopping_method"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"generate"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        return_intermediate_steps"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 返回中间步骤")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" agent_executor\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用并分析中间步骤")]),t._v("\nagent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" create_robust_react_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nresult "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("invoke"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"input"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"查询北京天气，然后计算如果去旅游需要准备多少预算，假设每天花费100美元，玩3天"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"最终答案:"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"output"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\n中间步骤分析:"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" step "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("enumerate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"intermediate_steps"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"步骤 ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(": ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("step"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"🛠️-错误处理与调试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#🛠️-错误处理与调试"}},[t._v("#")]),t._v(" 🛠️ 错误处理与调试")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("safe_agent_invoke")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" query"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""安全的代理调用"""')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("invoke"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"input"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" query"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"output"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("except")]),t._v(" Exception "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"代理执行出错: ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 测试各种边界情况")]),t._v("\ntest_queries "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"这是一个简单问题"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 不需要工具")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"查询不存在的城市天气"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 工具返回错误")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"计算无效表达式"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 工具执行错误")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"需要多步推理的复杂问题"')]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 正常流程")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" query "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" test_queries"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"\\n查询: ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("query"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" safe_agent_invoke"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" query"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"结果: ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"💡-最佳实践建议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#💡-最佳实践建议"}},[t._v("#")]),t._v(" 💡 最佳实践建议")]),t._v(" "),s("h3",{attrs:{id:"_1-工具设计原则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-工具设计原则"}},[t._v("#")]),t._v(" 1. "),s("strong",[t._v("工具设计原则")])]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 好的工具描述")]),t._v("\ngood_tool "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Tool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Weather"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    func"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("get_weather"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"获取指定城市的当前天气情况。输入: 城市名称，如'北京'\"")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 不好的工具描述  ")]),t._v("\nbad_tool "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Tool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Weather"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    func"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("get_weather"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"天气工具"')]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 太模糊")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2-提示工程技巧"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-提示工程技巧"}},[t._v("#")]),t._v(" 2. "),s("strong",[t._v("提示工程技巧")])]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在提示中添加领域知识")]),t._v("\ndomain_specific_prompt "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" prompt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("partial"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    domain_knowledge"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"你是一个旅游助手，专门帮助用户规划旅行。"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"_3-性能优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-性能优化"}},[t._v("#")]),t._v(" 3. "),s("strong",[t._v("性能优化")])]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 限制工具调用次数")]),t._v("\nagent_executor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" AgentExecutor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    agent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    tools"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    max_iterations"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 避免无限循环")]),t._v("\n    early_stopping_method"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"generate"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"🎯-典型应用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#🎯-典型应用场景"}},[t._v("#")]),t._v(" 🎯 典型应用场景")]),t._v(" "),s("h3",{attrs:{id:"_1-数据分析代理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-数据分析代理"}},[t._v("#")]),t._v(" 1. "),s("strong",[t._v("数据分析代理")])]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("tools "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    Tool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"查询数据库"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" func"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("query_db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"执行SQL查询"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Tool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"数据统计"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" func"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("calculate_stats"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"计算统计指标"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Tool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"生成图表"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" func"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("generate_plot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"创建数据可视化"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nagent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" create_react_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("llm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prompt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nresult "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("invoke"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"input"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"分析上个月销售数据，找出最畅销的产品并生成趋势图"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2-客户服务代理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-客户服务代理"}},[t._v("#")]),t._v(" 2. "),s("strong",[t._v("客户服务代理")])]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("tools "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    Tool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"查询订单"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" func"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("lookup_order"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"根据订单号查询订单状态"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Tool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"检查库存"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" func"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("check_inventory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"查询产品库存"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Tool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"创建工单"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" func"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("create_ticket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"创建客服工单"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[s("strong",[t._v("总结")]),t._v("："),s("code",[t._v("create_react_agent")]),t._v(" 提供了一个强大的框架，让 LLM 能够通过工具使用和环境交互来解决复杂问题。关键是设计好工具集、优化提示模板，并合理配置执行参数。")]),t._v(" "),s("h2",{attrs:{id:"代码结构分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代码结构分析"}},[t._v("#")]),t._v(" 代码结构分析")]),t._v(" "),s("p",[t._v("您的代码结构是正确的，分为两个主要部分：")]),t._v(" "),s("h3",{attrs:{id:"_1-indexing-索引构建-部分-✅"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-indexing-索引构建-部分-✅"}},[t._v("#")]),t._v(" 1. INDEXING（索引构建）部分 ✅")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("文档加载")]),t._v(": 使用 "),s("code",[t._v("WebBaseLoader")]),t._v(" 正确加载了网页内容")]),t._v(" "),s("li",[s("strong",[t._v("文本分割")]),t._v(": 使用 "),s("code",[t._v("RecursiveCharacterTextSplitter")]),t._v(" 适当分割文档")]),t._v(" "),s("li",[s("strong",[t._v("向量化")]),t._v(": 使用 "),s("code",[t._v("HuggingFaceEmbeddings")]),t._v(" 和本地模型 "),s("code",[t._v("bge-large-zh-v1.5")])]),t._v(" "),s("li",[s("strong",[t._v("向量存储")]),t._v(": 使用 "),s("code",[t._v("Chroma")]),t._v(" 存储向量，创建检索器")])]),t._v(" "),s("h3",{attrs:{id:"_2-retrieval-and-generation-检索与生成-部分-✅"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-retrieval-and-generation-检索与生成-部分-✅"}},[t._v("#")]),t._v(" 2. RETRIEVAL and GENERATION（检索与生成）部分 ✅")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("提示词")]),t._v(": 从 LangChain Hub 拉取 RAG 提示模板")]),t._v(" "),s("li",[s("strong",[t._v("LLM 配置")]),t._v(": 正确配置了 DeepSeek API")]),t._v(" "),s("li",[s("strong",[t._v("处理链")]),t._v(": 构建了标准的 RAG 流程：检索 → 格式化 → 提示 → LLM → 输出解析")]),t._v(" "),s("li",[s("strong",[t._v("执行")]),t._v(": 使用 "),s("code",[t._v("chain.invoke")]),t._v(" 执行处理链，获取模型输出")])])])}),[],!1,null,null,null);s.default=r.exports}}]);