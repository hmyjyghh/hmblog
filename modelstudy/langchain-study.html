<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>langchain Agent | 寒梦的博客</title>
    <meta name="generator" content="VuePress 1.9.4">
    <link rel="icon" href="/hmblog/logo.png">
    <meta name="description" content="宝剑锋从磨砺出，梅花香自苦寒来。">
    
    <link rel="preload" href="/hmblog/assets/css/0.styles.b92e6d01.css" as="style"><link rel="preload" href="/hmblog/assets/js/app.ba48173d.js" as="script"><link rel="preload" href="/hmblog/assets/js/3.ac02bfbd.js" as="script"><link rel="preload" href="/hmblog/assets/js/1.ba4d6411.js" as="script"><link rel="preload" href="/hmblog/assets/js/45.c5ced175.js" as="script"><link rel="preload" href="/hmblog/assets/js/9.d5a05a45.js" as="script"><link rel="prefetch" href="/hmblog/assets/js/10.cdd9f1fd.js"><link rel="prefetch" href="/hmblog/assets/js/100.6bd782a8.js"><link rel="prefetch" href="/hmblog/assets/js/101.aa82f15d.js"><link rel="prefetch" href="/hmblog/assets/js/102.02a5e952.js"><link rel="prefetch" href="/hmblog/assets/js/103.f64270f5.js"><link rel="prefetch" href="/hmblog/assets/js/104.28c05f95.js"><link rel="prefetch" href="/hmblog/assets/js/105.4a3c3d99.js"><link rel="prefetch" href="/hmblog/assets/js/106.d7163a41.js"><link rel="prefetch" href="/hmblog/assets/js/107.03567d93.js"><link rel="prefetch" href="/hmblog/assets/js/108.9c57ec7a.js"><link rel="prefetch" href="/hmblog/assets/js/109.0b5cc849.js"><link rel="prefetch" href="/hmblog/assets/js/11.513bb120.js"><link rel="prefetch" href="/hmblog/assets/js/110.c000ed58.js"><link rel="prefetch" href="/hmblog/assets/js/111.288d96b3.js"><link rel="prefetch" href="/hmblog/assets/js/112.8a5358fb.js"><link rel="prefetch" href="/hmblog/assets/js/113.a1de3201.js"><link rel="prefetch" href="/hmblog/assets/js/114.d8618f6d.js"><link rel="prefetch" href="/hmblog/assets/js/115.17026eb3.js"><link rel="prefetch" href="/hmblog/assets/js/116.f0cb16ec.js"><link rel="prefetch" href="/hmblog/assets/js/117.66402938.js"><link rel="prefetch" href="/hmblog/assets/js/118.e16ec272.js"><link rel="prefetch" href="/hmblog/assets/js/119.53ee2325.js"><link rel="prefetch" href="/hmblog/assets/js/12.6eb5f340.js"><link rel="prefetch" href="/hmblog/assets/js/120.b2631c22.js"><link rel="prefetch" href="/hmblog/assets/js/121.9b598b7e.js"><link rel="prefetch" href="/hmblog/assets/js/122.05f086d4.js"><link rel="prefetch" href="/hmblog/assets/js/123.ee628a51.js"><link rel="prefetch" href="/hmblog/assets/js/124.3309b897.js"><link rel="prefetch" href="/hmblog/assets/js/125.8ba7f05f.js"><link rel="prefetch" href="/hmblog/assets/js/126.363ab065.js"><link rel="prefetch" href="/hmblog/assets/js/127.3dc43128.js"><link rel="prefetch" href="/hmblog/assets/js/128.ead549d4.js"><link rel="prefetch" href="/hmblog/assets/js/129.0219dd0d.js"><link rel="prefetch" href="/hmblog/assets/js/13.41ba4240.js"><link rel="prefetch" href="/hmblog/assets/js/130.50036dbd.js"><link rel="prefetch" href="/hmblog/assets/js/131.43d759e2.js"><link rel="prefetch" href="/hmblog/assets/js/132.73426bd0.js"><link rel="prefetch" href="/hmblog/assets/js/133.bf6d3d08.js"><link rel="prefetch" href="/hmblog/assets/js/134.2eb9f09e.js"><link rel="prefetch" href="/hmblog/assets/js/135.06734521.js"><link rel="prefetch" href="/hmblog/assets/js/136.82c90848.js"><link rel="prefetch" href="/hmblog/assets/js/137.8569b3cd.js"><link rel="prefetch" href="/hmblog/assets/js/138.8e5559db.js"><link rel="prefetch" href="/hmblog/assets/js/139.d7e6536d.js"><link rel="prefetch" href="/hmblog/assets/js/14.bd0b82cb.js"><link rel="prefetch" href="/hmblog/assets/js/140.8481dfb3.js"><link rel="prefetch" href="/hmblog/assets/js/15.491bfa3e.js"><link rel="prefetch" href="/hmblog/assets/js/16.00b7c2a7.js"><link rel="prefetch" href="/hmblog/assets/js/17.2edfa6dd.js"><link rel="prefetch" href="/hmblog/assets/js/18.c1ed5355.js"><link rel="prefetch" href="/hmblog/assets/js/19.127093b0.js"><link rel="prefetch" href="/hmblog/assets/js/20.13018e45.js"><link rel="prefetch" href="/hmblog/assets/js/21.af0d47de.js"><link rel="prefetch" href="/hmblog/assets/js/22.94430091.js"><link rel="prefetch" href="/hmblog/assets/js/23.7f4160d8.js"><link rel="prefetch" href="/hmblog/assets/js/24.53f66321.js"><link rel="prefetch" href="/hmblog/assets/js/25.70c7adf7.js"><link rel="prefetch" href="/hmblog/assets/js/26.ed970703.js"><link rel="prefetch" href="/hmblog/assets/js/27.61f08265.js"><link rel="prefetch" href="/hmblog/assets/js/28.47f448c8.js"><link rel="prefetch" href="/hmblog/assets/js/29.3a6d76f5.js"><link rel="prefetch" href="/hmblog/assets/js/30.fcf9b535.js"><link rel="prefetch" href="/hmblog/assets/js/31.8a27a1da.js"><link rel="prefetch" href="/hmblog/assets/js/32.e4efef75.js"><link rel="prefetch" href="/hmblog/assets/js/33.ea12175d.js"><link rel="prefetch" href="/hmblog/assets/js/34.bc951939.js"><link rel="prefetch" href="/hmblog/assets/js/35.adfc7113.js"><link rel="prefetch" href="/hmblog/assets/js/36.f4b05b10.js"><link rel="prefetch" href="/hmblog/assets/js/37.b160f43f.js"><link rel="prefetch" href="/hmblog/assets/js/38.182e0a40.js"><link rel="prefetch" href="/hmblog/assets/js/39.f6688462.js"><link rel="prefetch" href="/hmblog/assets/js/4.e51e222a.js"><link rel="prefetch" href="/hmblog/assets/js/40.9edf4cd4.js"><link rel="prefetch" href="/hmblog/assets/js/41.6ee87788.js"><link rel="prefetch" href="/hmblog/assets/js/42.e15f3316.js"><link rel="prefetch" href="/hmblog/assets/js/43.a703d986.js"><link rel="prefetch" href="/hmblog/assets/js/44.73bbf228.js"><link rel="prefetch" href="/hmblog/assets/js/46.c039688e.js"><link rel="prefetch" href="/hmblog/assets/js/47.85473c5e.js"><link rel="prefetch" href="/hmblog/assets/js/48.011447cd.js"><link rel="prefetch" href="/hmblog/assets/js/49.64ffd976.js"><link rel="prefetch" href="/hmblog/assets/js/5.60398f15.js"><link rel="prefetch" href="/hmblog/assets/js/50.d4938794.js"><link rel="prefetch" href="/hmblog/assets/js/51.13d55290.js"><link rel="prefetch" href="/hmblog/assets/js/52.506ef0e3.js"><link rel="prefetch" href="/hmblog/assets/js/53.fbe62579.js"><link rel="prefetch" href="/hmblog/assets/js/54.72aa5c58.js"><link rel="prefetch" href="/hmblog/assets/js/55.8a3c2734.js"><link rel="prefetch" href="/hmblog/assets/js/56.4d420373.js"><link rel="prefetch" href="/hmblog/assets/js/57.57103446.js"><link rel="prefetch" href="/hmblog/assets/js/58.9aab8a53.js"><link rel="prefetch" href="/hmblog/assets/js/59.ec40cafa.js"><link rel="prefetch" href="/hmblog/assets/js/6.775d6c13.js"><link rel="prefetch" href="/hmblog/assets/js/60.05b1112b.js"><link rel="prefetch" href="/hmblog/assets/js/61.5dd88b4a.js"><link rel="prefetch" href="/hmblog/assets/js/62.4bf0f31f.js"><link rel="prefetch" href="/hmblog/assets/js/63.5fa24c27.js"><link rel="prefetch" href="/hmblog/assets/js/64.98804cd8.js"><link rel="prefetch" href="/hmblog/assets/js/65.9d6391ad.js"><link rel="prefetch" href="/hmblog/assets/js/66.afa16de6.js"><link rel="prefetch" href="/hmblog/assets/js/67.23a13c5e.js"><link rel="prefetch" href="/hmblog/assets/js/68.faffe00e.js"><link rel="prefetch" href="/hmblog/assets/js/69.8d2c347b.js"><link rel="prefetch" href="/hmblog/assets/js/7.e91fdee2.js"><link rel="prefetch" href="/hmblog/assets/js/70.bed5cdee.js"><link rel="prefetch" href="/hmblog/assets/js/71.712a04f2.js"><link rel="prefetch" href="/hmblog/assets/js/72.67728c96.js"><link rel="prefetch" href="/hmblog/assets/js/73.a49f5b5b.js"><link rel="prefetch" href="/hmblog/assets/js/74.fa293c83.js"><link rel="prefetch" href="/hmblog/assets/js/75.9452e054.js"><link rel="prefetch" href="/hmblog/assets/js/76.24ad0c90.js"><link rel="prefetch" href="/hmblog/assets/js/77.94b04afb.js"><link rel="prefetch" href="/hmblog/assets/js/78.97c9f7fb.js"><link rel="prefetch" href="/hmblog/assets/js/79.be8996a8.js"><link rel="prefetch" href="/hmblog/assets/js/8.968ba87b.js"><link rel="prefetch" href="/hmblog/assets/js/80.002c12e9.js"><link rel="prefetch" href="/hmblog/assets/js/81.724c88b9.js"><link rel="prefetch" href="/hmblog/assets/js/82.c17fc6b0.js"><link rel="prefetch" href="/hmblog/assets/js/83.b1e421f1.js"><link rel="prefetch" href="/hmblog/assets/js/84.94eacc74.js"><link rel="prefetch" href="/hmblog/assets/js/85.089b8ca8.js"><link rel="prefetch" href="/hmblog/assets/js/86.fb003f4f.js"><link rel="prefetch" href="/hmblog/assets/js/87.b6fd3eaa.js"><link rel="prefetch" href="/hmblog/assets/js/88.d8b79d91.js"><link rel="prefetch" href="/hmblog/assets/js/89.f6d32768.js"><link rel="prefetch" href="/hmblog/assets/js/90.89f31336.js"><link rel="prefetch" href="/hmblog/assets/js/91.47343b87.js"><link rel="prefetch" href="/hmblog/assets/js/92.2e8d45e3.js"><link rel="prefetch" href="/hmblog/assets/js/93.5e7328c6.js"><link rel="prefetch" href="/hmblog/assets/js/94.bde570da.js"><link rel="prefetch" href="/hmblog/assets/js/95.f0d4415e.js"><link rel="prefetch" href="/hmblog/assets/js/96.d48d924f.js"><link rel="prefetch" href="/hmblog/assets/js/97.3cea1091.js"><link rel="prefetch" href="/hmblog/assets/js/98.158fd54d.js"><link rel="prefetch" href="/hmblog/assets/js/99.ca68782b.js">
    <link rel="stylesheet" href="/hmblog/assets/css/0.styles.b92e6d01.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1c636796><div data-v-1c636796><div class="password-shadow password-wrapper-out" style="display:none;" data-v-2c3e9f55 data-v-1c636796 data-v-1c636796><h3 class="title" data-v-2c3e9f55>寒梦的博客</h3> <p class="description" data-v-2c3e9f55>宝剑锋从磨砺出，梅花香自苦寒来。</p> <label id="box" class="inputBox" data-v-2c3e9f55><input type="password" value="" data-v-2c3e9f55> <span data-v-2c3e9f55>Konck! Knock!</span> <button data-v-2c3e9f55>OK</button></label> <div class="footer" data-v-2c3e9f55><span data-v-2c3e9f55><i class="iconfont reco-theme" data-v-2c3e9f55></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-2c3e9f55>vuePress-theme-reco</a></span> <span data-v-2c3e9f55><i class="iconfont reco-copyright" data-v-2c3e9f55></i> <a data-v-2c3e9f55><span data-v-2c3e9f55>寒梦</span>
          
        <!---->
        2025
      </a></span></div></div> <div class="hide" data-v-1c636796><header class="navbar" data-v-1c636796><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hmblog/" class="home-link router-link-active"><!----> <span class="site-name">寒梦的博客</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      强大的MCP
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hmblog/mcpstudy/mcp-knowledge.html" class="nav-link"><i class="undefined"></i>
  MCP 是什么
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/mcpstudy/ide-mcp-server.html" class="nav-link"><i class="undefined"></i>
  IDE 使用MCP Server实操
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Python
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/basic.html" class="nav-link"><i class="undefined"></i>
  Python 基础
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/data-structure.html" class="nav-link"><i class="undefined"></i>
  Python 数据结构
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/builtin-function.html" class="nav-link"><i class="undefined"></i>
  Python 内置函数的使用
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/function.html" class="nav-link"><i class="undefined"></i>
  Python 函数
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/class.html" class="nav-link"><i class="undefined"></i>
  Python 类
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/module.html" class="nav-link"><i class="undefined"></i>
  Python 模块
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/package.html" class="nav-link"><i class="undefined"></i>
  Python 包
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/exception.html" class="nav-link"><i class="undefined"></i>
  Python 异常
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/file.html" class="nav-link"><i class="undefined"></i>
  Python 文件操作
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/regex.html" class="nav-link"><i class="undefined"></i>
  Python 正则表达式
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/thread.html" class="nav-link"><i class="undefined"></i>
  Python 多线程
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/process.html" class="nav-link"><i class="undefined"></i>
  Python 多进程
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/network.html" class="nav-link"><i class="undefined"></i>
  Python 网络编程
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/database.html" class="nav-link"><i class="undefined"></i>
  Python 数据库
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/numpy.html" class="nav-link"><i class="undefined"></i>
  Python numpy
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/array-operation.html" class="nav-link"><i class="undefined"></i>
  Python 数组操作
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/use-library.html" class="nav-link"><i class="undefined"></i>
  Python 常用库
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/string-function.html" class="nav-link"><i class="undefined"></i>
  Python 字符串函数
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/practice.html" class="nav-link"><i class="undefined"></i>
  Python 日常练习
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/use-pip-install.html" class="nav-link"><i class="undefined"></i>
  pip 那些事
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/line-continue.html" class="nav-link"><i class="undefined"></i>
  Python 中的行续行符
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/technology-point.html" class="nav-link"><i class="undefined"></i>
  Python 中技术点练习
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/pandas-study.html" class="nav-link"><i class="undefined"></i>
  pandas 库的使用
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      大模型应用开发
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/whatIsModel.html" class="nav-link"><i class="undefined"></i>
  什么是大模型应用开发
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-basic.html" class="nav-link"><i class="undefined"></i>
  大模型应用开发基础
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model.html" class="nav-link"><i class="undefined"></i>
  大模型应用开发构建
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-deploy.html" class="nav-link"><i class="undefined"></i>
  大模型应用开发部署
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/vector-database.html" class="nav-link"><i class="undefined"></i>
  向量数据库
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-pytorch.html" class="nav-link"><i class="undefined"></i>
  Fine-tuning框架PyTorch 和 Hugging face 框架使用
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/transformer-code.html" class="nav-link"><i class="undefined"></i>
  手撕Transformer 代码
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/transformer-knowledge.html" class="nav-link"><i class="undefined"></i>
  理解Transformer 代码必看
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/transformer-related.html" class="nav-link"><i class="undefined"></i>
  transformer 相关源码
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-transformer.html" class="nav-link"><i class="undefined"></i>
  Transformers实战
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-train.html" class="nav-link"><i class="undefined"></i>
  Transformers实战2
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-train-code.html" class="nav-link"><i class="undefined"></i>
  模型训练代码分析
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/transformer-learn.html" class="nav-link"><i class="undefined"></i>
  Transformer 核心组件学习路线
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/transformer-question.html" class="nav-link"><i class="undefined"></i>
  Transformer 论文精读中的常见问题
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-english.html" class="nav-link"><i class="undefined"></i>
  大模型相关的英语词汇
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-case.html" class="nav-link"><i class="undefined"></i>
  大模型应用开发案例
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-summary.html" class="nav-link"><i class="undefined"></i>
  大模型应用开发总结
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-question.html" class="nav-link"><i class="undefined"></i>
  大模型应用常见问题
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/impl-transformer.html" class="nav-link"><i class="undefined"></i>
  手撕Transformer
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-RNN.html" class="nav-link"><i class="undefined"></i>
  RNN（循环神经网络）是什么？
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-evaluate.html" class="nav-link"><i class="undefined"></i>
  大模型评估指标
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-langchain-rag.html" class="nav-link"><i class="undefined"></i>
  Langchain &amp; RAG
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-langchain.html" class="nav-link"><i class="undefined"></i>
  Langchain 核心知识点
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-rag.html" class="nav-link"><i class="undefined"></i>
  RAG 知识点
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/langchain-study.html" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="undefined"></i>
  Langchain 学习
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-rag-pain.html" class="nav-link"><i class="undefined"></i>
  RAG 痛点分析
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-function-calling.html" class="nav-link"><i class="undefined"></i>
  Function Calling
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/langchain-agent-practice.html" class="nav-link"><i class="undefined"></i>
  Langchain agent 实战作业二
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/extended-learning.html" class="nav-link"><i class="undefined"></i>
  扩展学习知识
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/self-function-calling.html" class="nav-link"><i class="undefined"></i>
  Function Calling 自己练习
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-fine-tuning.html" class="nav-link"><i class="undefined"></i>
  模型微调需要的库或者方法
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/lora-fine-tuning.html" class="nav-link"><i class="undefined"></i>
  LoRA 微调
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/agent.html" class="nav-link"><i class="undefined"></i>
  Agent 相关
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/langchain-prompt.html" class="nav-link"><i class="undefined"></i>
  练习langchain prompt的使用
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/construct-dataset.html" class="nav-link"><i class="undefined"></i>
  如何构造数据集
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/auto-model-desc.html" class="nav-link"><i class="undefined"></i>
  加载模型
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/compute-metrics.html" class="nav-link"><i class="undefined"></i>
  评估函数的使用
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/ner-instruct-task.html" class="nav-link"><i class="undefined"></i>
  NER 任务指令数据构造
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/finetuning-exercises-code.html" class="nav-link"><i class="undefined"></i>
  Fine-Tuning 实战作业三
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/finetuning-error-collect.html" class="nav-link"><i class="undefined"></i>
  微调实战三错误收集
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/finetuning-warn-collect.html" class="nav-link"><i class="undefined"></i>
  微调实战三警告收集
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/finetuning-f1-scores.html" class="nav-link"><i class="undefined"></i>
  微调实战F1 分数打印
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-train-analyze.html" class="nav-link"><i class="undefined"></i>
  训练完结果分析
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/finetuing-step5.html" class="nav-link"><i class="undefined"></i>
  微调实战-step5--数据处理函数
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/finetuing-step9.html" class="nav-link"><i class="undefined"></i>
  微调实战-step9--评估函数的使用
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/vLLM-intro.html" class="nav-link"><i class="undefined"></i>
  vLLM
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      算法
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/sort.html" class="nav-link"><i class="undefined"></i>
  排序算法
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/double-pointer.html" class="nav-link"><i class="undefined"></i>
  双指针算法
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/binary-tree.html" class="nav-link"><i class="undefined"></i>
  二叉树
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/receive-rain.html" class="nav-link"><i class="undefined"></i>
  接雨水
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/dynamic-plan.html" class="nav-link"><i class="undefined"></i>
  动态规划
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/greedy.html" class="nav-link"><i class="undefined"></i>
  贪心算法
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/longasc-sequence.html" class="nav-link"><i class="undefined"></i>
  最长上升子序列
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/binary-search.html" class="nav-link"><i class="undefined"></i>
  二分查找
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/reverse-list.html" class="nav-link"><i class="undefined"></i>
  反转链表
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/del-single-list.html" class="nav-link"><i class="undefined"></i>
  删除单链表-集合
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/other.html" class="nav-link"><i class="undefined"></i>
  其他
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/compare-al.html" class="nav-link"><i class="undefined"></i>
  m个数，最多用n次比较，找出第二大的数
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/effect-bracket.html" class="nav-link"><i class="undefined"></i>
  有效的括号
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hmblog/other/ai-agent.html" class="nav-link"><i class="undefined"></i>
  AI项目
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/python.html" class="nav-link"><i class="undefined"></i>
  python学习
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/conda.html" class="nav-link"><i class="undefined"></i>
  Conda 使用
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/using-packages.html" class="nav-link"><i class="undefined"></i>
  Pytorch 框架使用
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/pytorch-know.html" class="nav-link"><i class="undefined"></i>
  Pytorch 框架知识点
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/transformer-learn.html" class="nav-link"><i class="undefined"></i>
  transformer库中那些常用函数
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/transformer-collect.html" class="nav-link"><i class="undefined"></i>
  transformer库学习哪些事
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/transformer-1.html" class="nav-link"><i class="undefined"></i>
  transformer 使用T5模型
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/transformer-2.html" class="nav-link"><i class="undefined"></i>
  torch DataLoader
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/transformer-3.html" class="nav-link"><i class="undefined"></i>
  设置随机种子
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/model-refrence.html" class="nav-link"><i class="undefined"></i>
  优秀的参考文档
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/git-operate.html" class="nav-link"><i class="undefined"></i>
  git 操作命令
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/fine-tuning-adapters.html" class="nav-link"><i class="undefined"></i>
  PEFT 之Adapters
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/swanLab-info.html" class="nav-link"><i class="undefined"></i>
  深度学习之SwanLab
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/lora-0-1.html" class="nav-link"><i class="undefined"></i>
  从0到1手撕LoRA类
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      关于我
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/hmyjyghh" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/ghh_" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.zhihu.com/people/cool-62-29/columns" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  知乎
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://hmyjyghh.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1c636796></div> <aside class="sidebar" data-v-1c636796><div class="personal-info-wrapper" data-v-6f92ba70 data-v-1c636796><!----> <h3 class="name" data-v-6f92ba70>
    寒梦
  </h3> <div class="num" data-v-6f92ba70><div data-v-6f92ba70><h3 data-v-6f92ba70>100</h3> <h6 data-v-6f92ba70>Articles</h6></div> <div data-v-6f92ba70><h3 data-v-6f92ba70>4</h3> <h6 data-v-6f92ba70>Tags</h6></div></div> <ul class="social-links" data-v-6f92ba70></ul> <hr data-v-6f92ba70></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      强大的MCP
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hmblog/mcpstudy/mcp-knowledge.html" class="nav-link"><i class="undefined"></i>
  MCP 是什么
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/mcpstudy/ide-mcp-server.html" class="nav-link"><i class="undefined"></i>
  IDE 使用MCP Server实操
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Python
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/basic.html" class="nav-link"><i class="undefined"></i>
  Python 基础
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/data-structure.html" class="nav-link"><i class="undefined"></i>
  Python 数据结构
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/builtin-function.html" class="nav-link"><i class="undefined"></i>
  Python 内置函数的使用
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/function.html" class="nav-link"><i class="undefined"></i>
  Python 函数
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/class.html" class="nav-link"><i class="undefined"></i>
  Python 类
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/module.html" class="nav-link"><i class="undefined"></i>
  Python 模块
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/package.html" class="nav-link"><i class="undefined"></i>
  Python 包
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/exception.html" class="nav-link"><i class="undefined"></i>
  Python 异常
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/file.html" class="nav-link"><i class="undefined"></i>
  Python 文件操作
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/regex.html" class="nav-link"><i class="undefined"></i>
  Python 正则表达式
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/thread.html" class="nav-link"><i class="undefined"></i>
  Python 多线程
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/process.html" class="nav-link"><i class="undefined"></i>
  Python 多进程
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/network.html" class="nav-link"><i class="undefined"></i>
  Python 网络编程
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/database.html" class="nav-link"><i class="undefined"></i>
  Python 数据库
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/numpy.html" class="nav-link"><i class="undefined"></i>
  Python numpy
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/array-operation.html" class="nav-link"><i class="undefined"></i>
  Python 数组操作
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/use-library.html" class="nav-link"><i class="undefined"></i>
  Python 常用库
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/string-function.html" class="nav-link"><i class="undefined"></i>
  Python 字符串函数
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/practice.html" class="nav-link"><i class="undefined"></i>
  Python 日常练习
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/use-pip-install.html" class="nav-link"><i class="undefined"></i>
  pip 那些事
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/line-continue.html" class="nav-link"><i class="undefined"></i>
  Python 中的行续行符
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/technology-point.html" class="nav-link"><i class="undefined"></i>
  Python 中技术点练习
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/pystudy/pandas-study.html" class="nav-link"><i class="undefined"></i>
  pandas 库的使用
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      大模型应用开发
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/whatIsModel.html" class="nav-link"><i class="undefined"></i>
  什么是大模型应用开发
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-basic.html" class="nav-link"><i class="undefined"></i>
  大模型应用开发基础
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model.html" class="nav-link"><i class="undefined"></i>
  大模型应用开发构建
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-deploy.html" class="nav-link"><i class="undefined"></i>
  大模型应用开发部署
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/vector-database.html" class="nav-link"><i class="undefined"></i>
  向量数据库
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-pytorch.html" class="nav-link"><i class="undefined"></i>
  Fine-tuning框架PyTorch 和 Hugging face 框架使用
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/transformer-code.html" class="nav-link"><i class="undefined"></i>
  手撕Transformer 代码
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/transformer-knowledge.html" class="nav-link"><i class="undefined"></i>
  理解Transformer 代码必看
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/transformer-related.html" class="nav-link"><i class="undefined"></i>
  transformer 相关源码
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-transformer.html" class="nav-link"><i class="undefined"></i>
  Transformers实战
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-train.html" class="nav-link"><i class="undefined"></i>
  Transformers实战2
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-train-code.html" class="nav-link"><i class="undefined"></i>
  模型训练代码分析
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/transformer-learn.html" class="nav-link"><i class="undefined"></i>
  Transformer 核心组件学习路线
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/transformer-question.html" class="nav-link"><i class="undefined"></i>
  Transformer 论文精读中的常见问题
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-english.html" class="nav-link"><i class="undefined"></i>
  大模型相关的英语词汇
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-case.html" class="nav-link"><i class="undefined"></i>
  大模型应用开发案例
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-summary.html" class="nav-link"><i class="undefined"></i>
  大模型应用开发总结
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-question.html" class="nav-link"><i class="undefined"></i>
  大模型应用常见问题
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/impl-transformer.html" class="nav-link"><i class="undefined"></i>
  手撕Transformer
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-RNN.html" class="nav-link"><i class="undefined"></i>
  RNN（循环神经网络）是什么？
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-evaluate.html" class="nav-link"><i class="undefined"></i>
  大模型评估指标
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-langchain-rag.html" class="nav-link"><i class="undefined"></i>
  Langchain &amp; RAG
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-langchain.html" class="nav-link"><i class="undefined"></i>
  Langchain 核心知识点
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-rag.html" class="nav-link"><i class="undefined"></i>
  RAG 知识点
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/langchain-study.html" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="undefined"></i>
  Langchain 学习
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-rag-pain.html" class="nav-link"><i class="undefined"></i>
  RAG 痛点分析
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-function-calling.html" class="nav-link"><i class="undefined"></i>
  Function Calling
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/langchain-agent-practice.html" class="nav-link"><i class="undefined"></i>
  Langchain agent 实战作业二
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/extended-learning.html" class="nav-link"><i class="undefined"></i>
  扩展学习知识
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/self-function-calling.html" class="nav-link"><i class="undefined"></i>
  Function Calling 自己练习
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-fine-tuning.html" class="nav-link"><i class="undefined"></i>
  模型微调需要的库或者方法
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/lora-fine-tuning.html" class="nav-link"><i class="undefined"></i>
  LoRA 微调
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/agent.html" class="nav-link"><i class="undefined"></i>
  Agent 相关
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/langchain-prompt.html" class="nav-link"><i class="undefined"></i>
  练习langchain prompt的使用
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/construct-dataset.html" class="nav-link"><i class="undefined"></i>
  如何构造数据集
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/auto-model-desc.html" class="nav-link"><i class="undefined"></i>
  加载模型
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/compute-metrics.html" class="nav-link"><i class="undefined"></i>
  评估函数的使用
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/ner-instruct-task.html" class="nav-link"><i class="undefined"></i>
  NER 任务指令数据构造
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/finetuning-exercises-code.html" class="nav-link"><i class="undefined"></i>
  Fine-Tuning 实战作业三
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/finetuning-error-collect.html" class="nav-link"><i class="undefined"></i>
  微调实战三错误收集
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/finetuning-warn-collect.html" class="nav-link"><i class="undefined"></i>
  微调实战三警告收集
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/finetuning-f1-scores.html" class="nav-link"><i class="undefined"></i>
  微调实战F1 分数打印
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/model-train-analyze.html" class="nav-link"><i class="undefined"></i>
  训练完结果分析
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/finetuing-step5.html" class="nav-link"><i class="undefined"></i>
  微调实战-step5--数据处理函数
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/finetuing-step9.html" class="nav-link"><i class="undefined"></i>
  微调实战-step9--评估函数的使用
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/modelstudy/vLLM-intro.html" class="nav-link"><i class="undefined"></i>
  vLLM
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      算法
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/sort.html" class="nav-link"><i class="undefined"></i>
  排序算法
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/double-pointer.html" class="nav-link"><i class="undefined"></i>
  双指针算法
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/binary-tree.html" class="nav-link"><i class="undefined"></i>
  二叉树
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/receive-rain.html" class="nav-link"><i class="undefined"></i>
  接雨水
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/dynamic-plan.html" class="nav-link"><i class="undefined"></i>
  动态规划
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/greedy.html" class="nav-link"><i class="undefined"></i>
  贪心算法
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/longasc-sequence.html" class="nav-link"><i class="undefined"></i>
  最长上升子序列
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/binary-search.html" class="nav-link"><i class="undefined"></i>
  二分查找
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/reverse-list.html" class="nav-link"><i class="undefined"></i>
  反转链表
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/del-single-list.html" class="nav-link"><i class="undefined"></i>
  删除单链表-集合
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/other.html" class="nav-link"><i class="undefined"></i>
  其他
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/compare-al.html" class="nav-link"><i class="undefined"></i>
  m个数，最多用n次比较，找出第二大的数
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/algorithm/effect-bracket.html" class="nav-link"><i class="undefined"></i>
  有效的括号
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hmblog/other/ai-agent.html" class="nav-link"><i class="undefined"></i>
  AI项目
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/python.html" class="nav-link"><i class="undefined"></i>
  python学习
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/conda.html" class="nav-link"><i class="undefined"></i>
  Conda 使用
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/using-packages.html" class="nav-link"><i class="undefined"></i>
  Pytorch 框架使用
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/pytorch-know.html" class="nav-link"><i class="undefined"></i>
  Pytorch 框架知识点
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/transformer-learn.html" class="nav-link"><i class="undefined"></i>
  transformer库中那些常用函数
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/transformer-collect.html" class="nav-link"><i class="undefined"></i>
  transformer库学习哪些事
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/transformer-1.html" class="nav-link"><i class="undefined"></i>
  transformer 使用T5模型
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/transformer-2.html" class="nav-link"><i class="undefined"></i>
  torch DataLoader
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/transformer-3.html" class="nav-link"><i class="undefined"></i>
  设置随机种子
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/model-refrence.html" class="nav-link"><i class="undefined"></i>
  优秀的参考文档
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/git-operate.html" class="nav-link"><i class="undefined"></i>
  git 操作命令
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/fine-tuning-adapters.html" class="nav-link"><i class="undefined"></i>
  PEFT 之Adapters
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/swanLab-info.html" class="nav-link"><i class="undefined"></i>
  深度学习之SwanLab
</a></li><li class="dropdown-item"><!----> <a href="/hmblog/other/lora-0-1.html" class="nav-link"><i class="undefined"></i>
  从0到1手撕LoRA类
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      关于我
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/hmyjyghh" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/ghh_" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.zhihu.com/people/cool-62-29/columns" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  知乎
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://hmyjyghh.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-2c3e9f55 data-v-1c636796><h3 class="title" data-v-2c3e9f55></h3> <!----> <label id="box" class="inputBox" data-v-2c3e9f55><input type="password" value="" data-v-2c3e9f55> <span data-v-2c3e9f55>Konck! Knock!</span> <button data-v-2c3e9f55>OK</button></label> <div class="footer" data-v-2c3e9f55><span data-v-2c3e9f55><i class="iconfont reco-theme" data-v-2c3e9f55></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-2c3e9f55>vuePress-theme-reco</a></span> <span data-v-2c3e9f55><i class="iconfont reco-copyright" data-v-2c3e9f55></i> <a data-v-2c3e9f55><span data-v-2c3e9f55>寒梦</span>
          
        <!---->
        2025
      </a></span></div></div> <div data-v-1c636796><div data-v-1c636796><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">langchain Agent</h1> <div data-v-6acedb3b><i class="iconfont reco-account" data-v-6acedb3b><span data-v-6acedb3b>寒梦</span></i> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h2 id="langchain-agent"><a href="#langchain-agent" class="header-anchor">#</a> langchain Agent</h2> <h3 id="一、核心思想-从-工具-到-大脑"><a href="#一、核心思想-从-工具-到-大脑" class="header-anchor">#</a> 一、核心思想：从“工具”到“大脑”</h3> <ul><li><strong>传统的链式调用 (Chain)</strong>：像是<strong>一条自动化流水线</strong>。你预先设计好固定的步骤，比如：查询 -&gt; 检索 -&gt; 合成答案。对于确定性的任务非常高效，但缺乏灵活性。如果任务超出预设流程，它就会失败。</li> <li><strong>智能体 (Agent)</strong>：像是<strong>一个配备了工具和思考能力的人脑（LLM）</strong>。
<ul><li>你告诉它一个目标（比如“帮我分析一下公司Q3的销售数据并总结成PPT”），它会自己<strong>思考</strong>需要做什么、使用什么工具、按什么顺序执行，并能处理意外情况。</li></ul></li></ul> <p><strong>核心概念</strong>：Agent 是一个由大语言模型驱动的<strong>决策系统</strong>。它的核心能力是<strong>使用工具</strong>。LLM 作为代理的“大脑”，负责推理、规划和决策，而工具则是它完成任务所依赖的外部手段。</p> <hr> <h3 id="二、agent-的关键组成部分"><a href="#二、agent-的关键组成部分" class="header-anchor">#</a> 二、Agent 的关键组成部分</h3> <p>一个典型的 Agent 由以下四个核心部分构成：</p> <h4 id="_1-代理-agent-本身-决策逻辑"><a href="#_1-代理-agent-本身-决策逻辑" class="header-anchor">#</a> 1. <strong>代理（Agent）本身：决策逻辑</strong></h4> <p>这是核心，它定义了 LLM 如何根据当前状态决定下一步行动。LangChain 提供了多种类型的代理，适用于不同场景：</p> <ul><li><strong>Zero-shot ReAct Agent</strong>：最常用的一种。它只根据当前提示词（Prompt）进行推理，不记忆之前的操作步骤。适合单一任务。</li> <li><strong>Conversational Agent</strong>：专为对话设计，它保留了聊天历史，能处理多轮交互中的上下文。</li> <li><strong>Self-ask with Search Agent</strong>：一种特殊设计，擅长通过不断自问自答来分解复杂问题，通常与搜索引擎配合使用。</li> <li><strong>ReAct Document Store Agent</strong>：专门为在文档库中寻找答案而优化。</li></ul> <h4 id="_2-工具-tools-执行能力"><a href="#_2-工具-tools-执行能力" class="header-anchor">#</a> 2. <strong>工具（Tools）：执行能力</strong></h4> <p>工具是 Agent 可以调用的函数。它们是与外部世界交互的接口。任何能力都可以被封装成一个工具。例如：</p> <ul><li><strong>搜索引擎</strong>：<code>GoogleSearchAPIWrapper</code></li> <li><strong>计算器</strong>：一个简单的数学计算函数</li> <li><strong>Python 解释器</strong>：执行代码来验证或计算复杂公式</li> <li><strong>数据库查询器</strong>：执行 SQL 查询</li> <li><strong>自定义 API</strong>：调用公司内部的任何 API</li></ul> <h4 id="_3-工具包-toolkits-工具的集合"><a href="#_3-工具包-toolkits-工具的集合" class="header-anchor">#</a> 3. <strong>工具包（Toolkits）：工具的集合</strong></h4> <p>将完成一个特定领域任务所需的一组工具打包在一起。例如，一个“SQL 工具包”可能包含：<code>sql_db_query</code>, <code>sql_db_schema</code>, <code>sql_db_list_tables</code> 等工具。</p> <h4 id="_4-代理执行器-agent-executor-运行时环境"><a href="#_4-代理执行器-agent-executor-运行时环境" class="header-anchor">#</a> 4. <strong>代理执行器（Agent Executor）：运行时环境</strong></h4> <p>这是驱动 Agent 运行的“引擎”。它负责：</p> <ul><li>调用 Agent 进行决策。</li> <li>执行 Agent 选择的工具。</li> <li>将工具的执行结果返回给 Agent，作为下一步决策的上下文。</li> <li>处理错误、控制循环、防止无限循环。</li></ul> <hr> <h3 id="三、agent-的工作流程-react-框架"><a href="#三、agent-的工作流程-react-框架" class="header-anchor">#</a> 三、Agent 的工作流程（ReAct 框架）</h3> <p>最经典的 Agent 工作模式是 <strong>ReAct</strong>，即 <strong>Reason（推理）</strong> + <strong>Act（行动）</strong>。</p> <p>假设我们有一个问题：<strong>“埃隆·马斯克的公司特斯拉目前股价是多少？换算成人民币是多少？”</strong></p> <p>Agent 的工作流程如下：</p> <ol><li><strong>输入问题</strong>：将问题传递给 Agent。</li> <li><strong>思考（Reason）</strong>：LLM 分析问题，并规划步骤。
<ul><li><em>想法</em>：要回答这个问题，我需要先获取特斯拉的当前股价（美元），然后找到当前的美元对人民币汇率，最后进行换算。</li></ul></li> <li><strong>行动（Act）</strong>：LLM 决定调用哪个工具，并生成调用参数。
<ul><li><em>行动</em>：调用 <code>stock_price</code> 工具，参数为 <code>&quot;TSLA&quot;</code>。</li></ul></li> <li><strong>观察（Observe）</strong>：Agent 执行器执行工具，并获得结果。
<ul><li><em>观察</em>：<code>TSLA 股价为 250.00 美元</code>。</li></ul></li> <li><strong>再思考（Reason）</strong>：LLM 结合上一步的观察，进行下一步推理。
<ul><li><em>想法</em>：好的，我拿到了股价是 250 美元。现在我需要获取汇率。</li></ul></li> <li><strong>再行动（Act）</strong>：LLM 决定调用下一个工具。
<ul><li><em>行动</em>：调用 <code>currency_exchange</code> 工具，参数为 <code>{&quot;from&quot;: &quot;USD&quot;, &quot;to&quot;: &quot;CNY&quot;}</code>。</li></ul></li> <li><strong>再观察（Observe）</strong>：Agent 执行器再次执行工具。
<ul><li><em>观察</em>：<code>1 美元 = 7.25 人民币</code>。</li></ul></li> <li><strong>最终思考与回答</strong>：LLM 认为已经获得了所有必要信息，不再调用工具，而是直接合成最终答案。
<ul><li><em>最终答案</em>：特斯拉当前股价为 250.00 美元。根据当前汇率（1 USD = 7.25 CNY），换算成人民币大约是 1812.50 元。</li></ul></li></ol> <hr> <h3 id="四、代码示例-创建一个简单的-agent"><a href="#四、代码示例-创建一个简单的-agent" class="header-anchor">#</a> 四、代码示例：创建一个简单的 Agent</h3> <p>下面我们用一个具体的代码示例来演示如何创建一个能回答上述问题的 Agent。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 首先安装必要的库</span>
<span class="token comment"># !pip install langchain-openai langchain langchain-community</span>

<span class="token keyword">import</span> os
<span class="token keyword">from</span> langchain<span class="token punctuation">.</span>agents <span class="token keyword">import</span> AgentType<span class="token punctuation">,</span> initialize_agent<span class="token punctuation">,</span> Tool
<span class="token keyword">from</span> langchain_openai <span class="token keyword">import</span> ChatOpenAI
<span class="token keyword">from</span> langchain<span class="token punctuation">.</span>utilities <span class="token keyword">import</span> GoogleSearchAPIWrapper
<span class="token keyword">from</span> langchain<span class="token punctuation">.</span>tools <span class="token keyword">import</span> BaseTool
<span class="token keyword">from</span> typing <span class="token keyword">import</span> Type
<span class="token keyword">from</span> pydantic <span class="token keyword">import</span> BaseModel<span class="token punctuation">,</span> Field

<span class="token comment"># 设置OpenAI API Key</span>
os<span class="token punctuation">.</span>environ<span class="token punctuation">[</span><span class="token string">&quot;OPENAI_API_KEY&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;你的OpenAI API Key&quot;</span>

<span class="token comment"># 1. 定义自定义工具：汇率换算（这里用模拟函数代替真实API）</span>
<span class="token keyword">class</span> <span class="token class-name">CurrencyConversionInput</span><span class="token punctuation">(</span>BaseModel<span class="token punctuation">)</span><span class="token punctuation">:</span>
    amount<span class="token punctuation">:</span> <span class="token builtin">float</span> <span class="token operator">=</span> Field<span class="token punctuation">(</span>description<span class="token operator">=</span><span class="token string">&quot;要换算的金额&quot;</span><span class="token punctuation">)</span>
    from_currency<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> Field<span class="token punctuation">(</span>description<span class="token operator">=</span><span class="token string">&quot;原货币代码，如 USD&quot;</span><span class="token punctuation">)</span>
    to_currency<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> Field<span class="token punctuation">(</span>description<span class="token operator">=</span><span class="token string">&quot;目标货币代码，如 CNY&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">CurrencyConversionTool</span><span class="token punctuation">(</span>BaseTool<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> <span class="token string">&quot;currency_converter&quot;</span>
    description <span class="token operator">=</span> <span class="token string">&quot;用于将一种货币换算成另一种货币。输入应包含金额、原货币和目标货币。&quot;</span>
    args_schema<span class="token punctuation">:</span> Type<span class="token punctuation">[</span>BaseModel<span class="token punctuation">]</span> <span class="token operator">=</span> CurrencyConversionInput

    <span class="token keyword">def</span> <span class="token function">_run</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> amount<span class="token punctuation">:</span> <span class="token builtin">float</span><span class="token punctuation">,</span> from_currency<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> to_currency<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 模拟汇率数据（实际应用中应调用真实API）</span>
        exchange_rates <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;USD_CNY&quot;</span><span class="token punctuation">:</span> <span class="token number">7.25</span><span class="token punctuation">,</span>
            <span class="token string">&quot;EUR_CNY&quot;</span><span class="token punctuation">:</span> <span class="token number">7.80</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
        key <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f&quot;</span><span class="token interpolation"><span class="token punctuation">{</span>from_currency<span class="token punctuation">}</span></span><span class="token string">_</span><span class="token interpolation"><span class="token punctuation">{</span>to_currency<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span>
        rate <span class="token operator">=</span> exchange_rates<span class="token punctuation">.</span>get<span class="token punctuation">(</span>key<span class="token punctuation">)</span>
        <span class="token keyword">if</span> rate<span class="token punctuation">:</span>
            converted_amount <span class="token operator">=</span> amount <span class="token operator">*</span> rate
            <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f&quot;</span><span class="token interpolation"><span class="token punctuation">{</span>amount<span class="token punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">{</span>from_currency<span class="token punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token punctuation">{</span>converted_amount<span class="token punctuation">:</span><span class="token format-spec">.2f</span><span class="token punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">{</span>to_currency<span class="token punctuation">}</span></span><span class="token string"> (汇率: </span><span class="token interpolation"><span class="token punctuation">{</span>rate<span class="token punctuation">}</span></span><span class="token string">)&quot;</span></span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f&quot;找不到从 </span><span class="token interpolation"><span class="token punctuation">{</span>from_currency<span class="token punctuation">}</span></span><span class="token string"> 到 </span><span class="token interpolation"><span class="token punctuation">{</span>to_currency<span class="token punctuation">}</span></span><span class="token string"> 的汇率信息。&quot;</span></span>

<span class="token comment"># 2. 初始化LLM（使用GPT-3.5-turbo，因为它足够智能且成本较低）</span>
llm <span class="token operator">=</span> ChatOpenAI<span class="token punctuation">(</span>model<span class="token operator">=</span><span class="token string">&quot;gpt-3.5-turbo&quot;</span><span class="token punctuation">,</span> temperature<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>

<span class="token comment"># 3. 定义工具列表</span>
tools <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token comment"># 工具1：谷歌搜索（需要配置GOOGLE_API_KEY和GOOGLE_CSE_ID）</span>
    <span class="token comment"># Tool(</span>
    <span class="token comment">#     name=&quot;google_search&quot;,</span>
    <span class="token comment">#     func=GoogleSearchAPIWrapper().run,</span>
    <span class="token comment">#     description=&quot;用于搜索当前事件或事实信息。&quot;</span>
    <span class="token comment"># ),</span>
    <span class="token comment"># 工具2：我们自定义的汇率换算工具</span>
    CurrencyConversionTool<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment"># 工具3：可以再添加一个计算器工具用于数学计算</span>
    Tool<span class="token punctuation">(</span>
        name<span class="token operator">=</span><span class="token string">&quot;Calculator&quot;</span><span class="token punctuation">,</span>
        func<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token builtin">eval</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment"># 简单演示，实际应用请使用更安全的计算库</span>
        description<span class="token operator">=</span><span class="token string">&quot;用于执行数学计算，例如：'2 * 3' 或 '250 * 7.25'。&quot;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">]</span>

<span class="token comment"># 4. 初始化Agent</span>
<span class="token comment"># 使用 ZERO_SHOT_REACT_DESCRIPTION 代理类型，它根据工具的描述来决定使用哪个工具。</span>
agent <span class="token operator">=</span> initialize_agent<span class="token punctuation">(</span>
    tools<span class="token operator">=</span>tools<span class="token punctuation">,</span>
    llm<span class="token operator">=</span>llm<span class="token punctuation">,</span>
    agent<span class="token operator">=</span>AgentType<span class="token punctuation">.</span>ZERO_SHOT_REACT_DESCRIPTION<span class="token punctuation">,</span> <span class="token comment"># 最常用的代理类型</span>
    verbose<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token comment"># 开启详细日志，可以看到Agent的思考过程！</span>
    handle_parsing_errors<span class="token operator">=</span><span class="token boolean">True</span> <span class="token comment"># 优雅地处理解析错误</span>
<span class="token punctuation">)</span>

<span class="token comment"># 5. 运行Agent！</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token comment"># 问题1：需要多步推理和工具使用</span>
    result1 <span class="token operator">=</span> agent<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token string">&quot;如果我有100美元，按照今天的汇率能换成多少人民币？&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;答案： </span><span class="token interpolation"><span class="token punctuation">{</span>result1<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;=&quot;</span><span class="token operator">*</span><span class="token number">50</span> <span class="token operator">+</span> <span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span>

    <span class="token comment"># 问题2：涉及计算</span>
    result2 <span class="token operator">=</span> agent<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token string">&quot;100的平方加上50的三分之一是多少？&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;答案： </span><span class="token interpolation"><span class="token punctuation">{</span>result2<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>

<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;发生错误：</span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
</code></pre></div><p><strong>运行上述代码，当 <code>verbose=True</code> 时，你会在控制台看到类似以下的思考过程：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>&gt; Entering new AgentExecutor chain...
 我需要将100美元换算成人民币。我应该使用汇率换算工具。
 行动：currency_converter
 行动输入：{&quot;amount&quot;: 100, &quot;from_currency&quot;: &quot;USD&quot;, &quot;to_currency&quot;: &quot;CNY&quot;}
 观察：100 USD = 725.00 CNY (汇率: 7.25)
 思考：我已经得到了换算结果。
 最终答案：100美元按照今天的汇率（1美元=7.25人民币）可以兑换成725.00元人民币。

&gt; Finished chain.
答案： 100美元按照今天的汇率（1美元=7.25人民币）可以兑换成725.00元人民币。
</code></pre></div><h3 id="五、总结-agent-的优势与挑战"><a href="#五、总结-agent-的优势与挑战" class="header-anchor">#</a> 五、总结：Agent 的优势与挑战</h3> <p><strong>优势：</strong></p> <ol><li><strong>强大灵活</strong>：能够完成需要多步骤、动态决策的复杂任务。</li> <li><strong>扩展性强</strong>：通过工具，LLM 的能力被无限扩展，可以操作现实世界中的各种系统。</li> <li><strong>自动化</strong>：将复杂工作流自动化，减少人工干预。</li></ol> <p><strong>挑战与注意事项：</strong></p> <ol><li><strong>延迟与成本</strong>：每一步都需要调用LLM，可能比Chain慢且贵。</li> <li><strong>可靠性</strong>：LLM可能做出错误的决策或生成错误的工具参数，需要完善的错误处理。</li> <li><strong>安全性</strong>：让LLM自主调用工具存在潜在风险，必须严格控制工具的权限。</li> <li><strong>调试复杂</strong>：由于决策路径不确定，调试比固定的Chain更困难。</li></ol> <p><strong>LangChain Agent 是将 LLM 从一個“无所不知但无能为力”的百科全书，转变为一个“善于规划并动手执行”的智能助手的关键技术。</strong></p> <ul><li>在选择使用 Chain 还是 Agent 时，一个简单的原则是：如果任务流程是固定的，用 Chain；</li> <li>如果任务需要动态规划和工具使用，就用 Agent。</li></ul> <hr> <h3 id="_1-langchain-agent的概念"><a href="#_1-langchain-agent的概念" class="header-anchor">#</a> 1. langchain Agent的概念?</h3> <ul><li>是一个基于大模型的智能体，它可以根据用户的输入，生成符合用户需求的文本</li> <li>它的核心思想是，将大模型的能力，与用户的输入，进行结合，生成符合用户需求的文本</li> <li>它的劣势是，它的计算复杂度较高</li></ul> <h3 id="_2-核心概念"><a href="#_2-核心概念" class="header-anchor">#</a> 2. 核心概念</h3> <ul><li>Agent 是一个由大语言模型驱动的决策系统。</li> <li>它的核心能力是使用工具。</li> <li>LLM 作为代理的“大脑”，负责推理、规划和决策，而工具则是它完成任务所依赖的外部手段。</li></ul> <blockquote><p>核心逻辑</p></blockquote> <p>感知--&gt;决策--&gt;执行</p> <h3 id="_3-关键特性"><a href="#_3-关键特性" class="header-anchor">#</a> 3. 关键特性</h3> <ol><li>自主性</li> <li>工具调用能力</li> <li>记忆与反馈</li></ol> <h2 id="langchain-memory"><a href="#langchain-memory" class="header-anchor">#</a> LangChain Memory</h2> <h3 id="_1-from-langchain-memory-import-conversationbuffermemory"><a href="#_1-from-langchain-memory-import-conversationbuffermemory" class="header-anchor">#</a> 1. from langchain.memory import ConversationBufferMemory</h3> <p>langchain 中 ConversationBufferMemory  这个类的作用</p> <ol><li>记忆对话历史</li></ol> <p><code>ConversationBufferMemory</code> 就像一个&quot;对话记录本&quot;，它会自动保存用户和AI之间的所有对话记录。</p> <ol start="2"><li>提供对话上下文</li></ol> <p>当进行新的对话时，内存会将历史记录作为上下文提供给LLM：</p> <h3 id="_2-from-langchain-agents-import-agenttype-initialize-agent-tool"><a href="#_2-from-langchain-agents-import-agenttype-initialize-agent-tool" class="header-anchor">#</a> 2. from langchain.agents import AgentType, initialize_agent, Tool</h3> <ol><li><code>initialize_agent</code> 这个函数的使用</li></ol> <h1 id="langchain-agent-2"><a href="#langchain-agent-2" class="header-anchor">#</a> langchain.agent</h1> <blockquote><p>from langchain.agents import AgentType, initialize_agent, Tool</p></blockquote> <p>我来详细解释这些函数的作用，并提供版本信息。</p> <h2 id="_1-agenttype-agent类型枚举"><a href="#_1-agenttype-agent类型枚举" class="header-anchor">#</a> 1. <code>AgentType</code> - Agent类型枚举</h2> <h3 id="作用"><a href="#作用" class="header-anchor">#</a> 作用：</h3> <p>定义不同类型的Agent策略，每种类型对应不同的推理和执行方式。</p> <h3 id="常用的agenttype"><a href="#常用的agenttype" class="header-anchor">#</a> 常用的AgentType：</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> langchain<span class="token punctuation">.</span>agents <span class="token keyword">import</span> AgentType

<span class="token comment"># 主要类型示例：</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>AgentType<span class="token punctuation">.</span>ZERO_SHOT_REACT_DESCRIPTION<span class="token punctuation">)</span>        <span class="token comment"># &quot;zero-shot-react-description&quot;</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>AgentType<span class="token punctuation">.</span>OPENAI_FUNCTIONS<span class="token punctuation">)</span>                   <span class="token comment"># &quot;openai-functions&quot;</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>AgentType<span class="token punctuation">.</span>STRUCTURED_CHAT_ZERO_SHOT_REACT_DESCRIPTION<span class="token punctuation">)</span> <span class="token comment"># &quot;structured-chat-zero-shot-react-description&quot;</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>AgentType<span class="token punctuation">.</span>CONVERSATIONAL_REACT_DESCRIPTION<span class="token punctuation">)</span>   <span class="token comment"># &quot;conversational-react-description&quot;</span>
</code></pre></div><h3 id="各种类型的特点"><a href="#各种类型的特点" class="header-anchor">#</a> 各种类型的特点：</h3> <table><thead><tr><th>AgentType</th> <th>特点</th> <th>适用场景</th></tr></thead> <tbody><tr><td><code>ZERO_SHOT_REACT_DESCRIPTION</code></td> <td>零样本学习，基于工具描述</td> <td>简单任务，无记忆</td></tr> <tr><td><code>OPENAI_FUNCTIONS</code></td> <td>使用OpenAI函数调用</td> <td>与OpenAI模型配合最佳</td></tr> <tr><td><code>STRUCTURED_CHAT_ZERO_SHOT_REACT_DESCRIPTION</code></td> <td>支持结构化输入</td> <td>复杂任务，需要严格格式</td></tr> <tr><td><code>CONVERSATIONAL_REACT_DESCRIPTION</code></td> <td>支持对话记忆</td> <td>多轮对话场景</td></tr></tbody></table> <h2 id="_2-tool-工具类"><a href="#_2-tool-工具类" class="header-anchor">#</a> 2. <code>Tool</code> - 工具类</h2> <h3 id="作用-2"><a href="#作用-2" class="header-anchor">#</a> 作用：</h3> <p>将函数封装成Agent可以调用的工具。</p> <h3 id="基本用法"><a href="#基本用法" class="header-anchor">#</a> 基本用法：</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> langchain<span class="token punctuation">.</span>tools <span class="token keyword">import</span> Tool
<span class="token keyword">from</span> pydantic <span class="token keyword">import</span> BaseModel<span class="token punctuation">,</span> Field

<span class="token comment"># 定义输入参数模型</span>
<span class="token keyword">class</span> <span class="token class-name">CalculatorInput</span><span class="token punctuation">(</span>BaseModel<span class="token punctuation">)</span><span class="token punctuation">:</span>
    expression<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> Field<span class="token punctuation">(</span>description<span class="token operator">=</span><span class="token string">&quot;数学表达式，如 '2 + 2'&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 创建工具函数</span>
<span class="token keyword">def</span> <span class="token function">calculator</span><span class="token punctuation">(</span>expression<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">str</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;执行数学计算&quot;&quot;&quot;</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        result <span class="token operator">=</span> <span class="token builtin">eval</span><span class="token punctuation">(</span>expression<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f&quot;结果: </span><span class="token interpolation"><span class="token punctuation">{</span>result<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span>
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f&quot;计算错误: </span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span>

<span class="token comment"># 创建Tool实例</span>
calc_tool <span class="token operator">=</span> Tool<span class="token punctuation">(</span>
    name<span class="token operator">=</span><span class="token string">&quot;Calculator&quot;</span><span class="token punctuation">,</span>
    description<span class="token operator">=</span><span class="token string">&quot;用于执行数学计算&quot;</span><span class="token punctuation">,</span>
    func<span class="token operator">=</span>calculator<span class="token punctuation">,</span>
    args_schema<span class="token operator">=</span>CalculatorInput  <span class="token comment"># 可选：定义参数格式</span>
<span class="token punctuation">)</span>
</code></pre></div><h3 id="tool参数说明"><a href="#tool参数说明" class="header-anchor">#</a> Tool参数说明：</h3> <div class="language-python extra-class"><pre class="language-python"><code>Tool<span class="token punctuation">(</span>
    name<span class="token operator">=</span><span class="token string">&quot;工具名称&quot;</span><span class="token punctuation">,</span>           <span class="token comment"># 工具标识</span>
    description<span class="token operator">=</span><span class="token string">&quot;工具描述&quot;</span><span class="token punctuation">,</span>    <span class="token comment"># Agent根据描述选择工具</span>
    func<span class="token operator">=</span>工具函数<span class="token punctuation">,</span>            <span class="token comment"># 实际执行的函数</span>
    args_schema<span class="token operator">=</span>参数模型<span class="token punctuation">,</span>     <span class="token comment"># 可选：参数验证</span>
    return_direct<span class="token operator">=</span><span class="token boolean">False</span>       <span class="token comment"># 是否直接返回结果</span>
<span class="token punctuation">)</span>
</code></pre></div><h2 id="_3-initialize-agent-初始化agent"><a href="#_3-initialize-agent-初始化agent" class="header-anchor">#</a> 3. <code>initialize_agent</code> - 初始化Agent</h2> <h3 id="作用-3"><a href="#作用-3" class="header-anchor">#</a> 作用：</h3> <p>将LLM、工具、记忆等组件组合成一个可用的Agent。</p> <h3 id="基本用法-2"><a href="#基本用法-2" class="header-anchor">#</a> 基本用法：</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> langchain<span class="token punctuation">.</span>agents <span class="token keyword">import</span> initialize_agent<span class="token punctuation">,</span> AgentType
<span class="token keyword">from</span> langchain<span class="token punctuation">.</span>tools <span class="token keyword">import</span> Tool
<span class="token keyword">from</span> langchain_openai <span class="token keyword">import</span> ChatOpenAI

<span class="token comment"># 1. 准备组件</span>
llm <span class="token operator">=</span> ChatOpenAI<span class="token punctuation">(</span>model<span class="token operator">=</span><span class="token string">&quot;gpt-3.5-turbo&quot;</span><span class="token punctuation">)</span>
tools <span class="token operator">=</span> <span class="token punctuation">[</span>calc_tool<span class="token punctuation">,</span> search_tool<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>  <span class="token comment"># 工具列表</span>
memory <span class="token operator">=</span> ConversationBufferMemory<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># 记忆组件</span>

<span class="token comment"># 2. 初始化Agent</span>
agent <span class="token operator">=</span> initialize_agent<span class="token punctuation">(</span>
    tools<span class="token operator">=</span>tools<span class="token punctuation">,</span>
    llm<span class="token operator">=</span>llm<span class="token punctuation">,</span>
    agent<span class="token operator">=</span>AgentType<span class="token punctuation">.</span>OPENAI_FUNCTIONS<span class="token punctuation">,</span>  <span class="token comment"># Agent类型</span>
    memory<span class="token operator">=</span>memory<span class="token punctuation">,</span>                     <span class="token comment"># 可选：记忆</span>
    verbose<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>                      <span class="token comment"># 是否显示详细过程</span>
    handle_parsing_errors<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>        <span class="token comment"># 是否处理解析错误</span>
    max_iterations<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span>                  <span class="token comment"># 最大迭代次数</span>
    early_stopping_method<span class="token operator">=</span><span class="token string">&quot;generate&quot;</span>   <span class="token comment"># 停止条件</span>
<span class="token punctuation">)</span>
</code></pre></div><h3 id="完整参数示例"><a href="#完整参数示例" class="header-anchor">#</a> 完整参数示例：</h3> <div class="language-python extra-class"><pre class="language-python"><code>agent <span class="token operator">=</span> initialize_agent<span class="token punctuation">(</span>
    tools<span class="token operator">=</span>tools<span class="token punctuation">,</span>                           <span class="token comment"># 工具列表</span>
    llm<span class="token operator">=</span>llm<span class="token punctuation">,</span>                              <span class="token comment"># 语言模型</span>
    agent<span class="token operator">=</span>AgentType<span class="token punctuation">.</span>OPENAI_FUNCTIONS<span class="token punctuation">,</span>     <span class="token comment"># Agent策略类型</span>
    memory<span class="token operator">=</span>memory<span class="token punctuation">,</span>                        <span class="token comment"># 记忆组件</span>
    verbose<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>                         <span class="token comment"># 详细日志</span>
    handle_parsing_errors<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>           <span class="token comment"># 错误处理</span>
    max_iterations<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span>                     <span class="token comment"># 防止无限循环</span>
    early_stopping_method<span class="token operator">=</span><span class="token string">&quot;generate&quot;</span><span class="token punctuation">,</span>     <span class="token comment"># 停止方法</span>
    agent_kwargs<span class="token operator">=</span><span class="token punctuation">{</span>                        <span class="token comment"># Agent额外参数</span>
        <span class="token string">'prefix'</span><span class="token punctuation">:</span> <span class="token string">'你是一个助手...'</span><span class="token punctuation">,</span>      <span class="token comment"># 系统提示词</span>
        <span class="token string">'suffix'</span><span class="token punctuation">:</span> <span class="token string">'开始任务...'</span><span class="token punctuation">,</span>         <span class="token comment"># 结束提示词</span>
        <span class="token string">'format_instructions'</span><span class="token punctuation">:</span> <span class="token string">'...'</span>      <span class="token comment"># 格式指令</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div><h2 id="_4-版本信息"><a href="#_4-版本信息" class="header-anchor">#</a> 4. 版本信息</h2> <h3 id="initialize-agent-所在的langchain版本"><a href="#initialize-agent-所在的langchain版本" class="header-anchor">#</a> <code>initialize_agent</code> 所在的LangChain版本：</h3> <p><strong>主要版本演进：</strong></p> <table><thead><tr><th>版本范围</th> <th>特点</th> <th><code>initialize_agent</code> 状态</th></tr></thead> <tbody><tr><td><strong>&lt; 0.1.0</strong> (早期版本)</td> <td>实验性API</td> <td>存在但不稳定</td></tr> <tr><td><strong>0.1.x</strong></td> <td>正式发布</td> <td>稳定可用</td></tr> <tr><td><strong>≥ 0.2.0</strong></td> <td>模块化重构</td> <td>仍然存在，但推荐新方法</td></tr></tbody></table> <h3 id="当前推荐的使用方式"><a href="#当前推荐的使用方式" class="header-anchor">#</a> 当前推荐的使用方式：</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 方式1：传统的initialize_agent（仍然可用）</span>
<span class="token keyword">from</span> langchain<span class="token punctuation">.</span>agents <span class="token keyword">import</span> initialize_agent

<span class="token comment"># 方式2：新的推荐方式（LangChain ≥ 0.2.0）</span>
<span class="token keyword">from</span> langchain<span class="token punctuation">.</span>agents <span class="token keyword">import</span> create_openai_functions_agent
<span class="token keyword">from</span> langchain<span class="token punctuation">.</span>agents <span class="token keyword">import</span> AgentExecutor

<span class="token comment"># 创建Agent</span>
agent <span class="token operator">=</span> create_openai_functions_agent<span class="token punctuation">(</span>llm<span class="token punctuation">,</span> tools<span class="token punctuation">,</span> system_message<span class="token punctuation">)</span>
<span class="token comment"># 创建执行器</span>
agent_executor <span class="token operator">=</span> AgentExecutor<span class="token punctuation">(</span>agent<span class="token operator">=</span>agent<span class="token punctuation">,</span> tools<span class="token operator">=</span>tools<span class="token punctuation">,</span> verbose<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="检查你的langchain版本"><a href="#检查你的langchain版本" class="header-anchor">#</a> 检查你的LangChain版本：</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> langchain
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;LangChain版本: </span><span class="token interpolation"><span class="token punctuation">{</span>langchain<span class="token punctuation">.</span>__version__<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>

<span class="token comment"># 安装特定版本</span>
<span class="token comment"># pip install langchain==0.1.0</span>
<span class="token comment"># pip install langchain&gt;=0.2.0</span>
</code></pre></div><h2 id="_5-完整工作示例"><a href="#_5-完整工作示例" class="header-anchor">#</a> 5. 完整工作示例</h2> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> langchain<span class="token punctuation">.</span>agents <span class="token keyword">import</span> initialize_agent<span class="token punctuation">,</span> AgentType<span class="token punctuation">,</span> Tool
<span class="token keyword">from</span> langchain_openai <span class="token keyword">import</span> ChatOpenAI
<span class="token keyword">from</span> langchain<span class="token punctuation">.</span>memory <span class="token keyword">import</span> ConversationBufferMemory
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

<span class="token comment"># 1. 准备数据</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">&quot;titanic.csv&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 2. 创建工具</span>
<span class="token keyword">def</span> <span class="token function">data_summary</span><span class="token punctuation">(</span>query<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">str</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;数据统计摘要工具&quot;&quot;&quot;</span>
    numeric_cols <span class="token operator">=</span> df<span class="token punctuation">.</span>select_dtypes<span class="token punctuation">(</span>include<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'number'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>columns
    summary <span class="token operator">=</span> df<span class="token punctuation">[</span>numeric_cols<span class="token punctuation">]</span><span class="token punctuation">.</span>describe<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f&quot;统计摘要:\n</span><span class="token interpolation"><span class="token punctuation">{</span>summary<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span>

summary_tool <span class="token operator">=</span> Tool<span class="token punctuation">(</span>
    name<span class="token operator">=</span><span class="token string">&quot;DataSummary&quot;</span><span class="token punctuation">,</span>
    description<span class="token operator">=</span><span class="token string">&quot;获取数据的统计摘要&quot;</span><span class="token punctuation">,</span>
    func<span class="token operator">=</span>data_summary
<span class="token punctuation">)</span>

<span class="token comment"># 3. 初始化Agent</span>
llm <span class="token operator">=</span> ChatOpenAI<span class="token punctuation">(</span>model<span class="token operator">=</span><span class="token string">&quot;gpt-3.5-turbo&quot;</span><span class="token punctuation">)</span>
tools <span class="token operator">=</span> <span class="token punctuation">[</span>summary_tool<span class="token punctuation">]</span>
memory <span class="token operator">=</span> ConversationBufferMemory<span class="token punctuation">(</span><span class="token punctuation">)</span>

agent <span class="token operator">=</span> initialize_agent<span class="token punctuation">(</span>
    tools<span class="token operator">=</span>tools<span class="token punctuation">,</span>
    llm<span class="token operator">=</span>llm<span class="token punctuation">,</span>
    agent<span class="token operator">=</span>AgentType<span class="token punctuation">.</span>OPENAI_FUNCTIONS<span class="token punctuation">,</span>
    memory<span class="token operator">=</span>memory<span class="token punctuation">,</span>
    verbose<span class="token operator">=</span><span class="token boolean">True</span>
<span class="token punctuation">)</span>

<span class="token comment"># 4. 使用Agent</span>
result <span class="token operator">=</span> agent<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token string">&quot;请分析数据的统计特征&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
</code></pre></div><h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <ul><li><strong><code>AgentType</code></strong>: 定义Agent的推理策略类型</li> <li><strong><code>Tool</code></strong>: 将函数封装成Agent可调用的工具</li> <li><strong><code>initialize_agent</code></strong>: 核心函数，将各个组件组合成可用的Agent</li> <li><strong>版本</strong>: <code>initialize_agent</code> 在 LangChain 0.1.x 和 0.2.x 中都可用，但新版本推荐使用更模块化的方式</li></ul> <p>这些组件共同构成了LangChain Agent框架的核心，让你能够创建智能的、可工具调用的AI助手。</p> <blockquote><p><code>initialize_agent</code> 虽然在新版本里依旧可以用，但推荐新方法：<code>create_openai_functions_agent</code></p></blockquote> <h2 id="如何使用langchain-的各个核心组件"><a href="#如何使用langchain-的各个核心组件" class="header-anchor">#</a> 如何使用langchain 的各个核心组件</h2> <blockquote><p>该从哪里导入</p></blockquote> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">from</span> langchain_core<span class="token punctuation">.</span>prompts <span class="token keyword">import</span> ChatPromptTemplate<span class="token punctuation">,</span> MessagesPlaceholder
<span class="token keyword">from</span> langchain_core<span class="token punctuation">.</span>llms <span class="token keyword">import</span> LLM
<span class="token keyword">from</span> langchain_core<span class="token punctuation">.</span>embeddings <span class="token keyword">import</span> Embeddings
<span class="token keyword">from</span> langchain_core<span class="token punctuation">.</span>vectorstores <span class="token keyword">import</span> VectorStoreRetriever
<span class="token keyword">from</span> langchain_core<span class="token punctuation">.</span>output_parsers <span class="token keyword">import</span> StrOutputParser
<span class="token keyword">from</span> langchain_core<span class="token punctuation">.</span>runnables <span class="token keyword">import</span> RunnablePassthrough
<span class="token keyword">from</span> langchain_chat_models <span class="token keyword">import</span> ChatOpenAI
<span class="token keyword">from</span> langchain_openai <span class="token keyword">import</span> ChatOpenAI
<span class="token keyword">from</span> langchain_embeddings <span class="token keyword">import</span> HuggingFaceEmbeddings
<span class="token keyword">from</span> langchain_vectorstores <span class="token keyword">import</span> Chroma
<span class="token keyword">from</span> langchain_hub <span class="token keyword">import</span> pull

<span class="token keyword">from</span> langchain<span class="token punctuation">.</span>agents <span class="token keyword">import</span> create_openai_functions_agent<span class="token punctuation">,</span> AgentExecutor<span class="token punctuation">,</span> AgentType
<span class="token keyword">from</span> langchain<span class="token punctuation">.</span>tools <span class="token keyword">import</span> Tool
<span class="token keyword">from</span> langchain<span class="token punctuation">.</span>memory <span class="token keyword">import</span> ConversationBufferMemory

</code></pre></div><h2 id="注意langchain-不同版本-initialize-agent-函数的参数可能会有差异-建议查看对应版本的文档。"><a href="#注意langchain-不同版本-initialize-agent-函数的参数可能会有差异-建议查看对应版本的文档。" class="header-anchor">#</a> 注意langchain 不同版本，<code>initialize_agent</code> 函数的参数可能会有差异，建议查看对应版本的文档。</h2> <blockquote><p>不同版本，可能缺少某些核心组件， 建议查看对应版本的文档。</p></blockquote> <p>eg:</p> <h3 id="版本兼容性对照表"><a href="#版本兼容性对照表" class="header-anchor">#</a> 版本兼容性对照表</h3> <table><thead><tr><th>LangChain版本</th> <th>导入方式</th> <th>状态</th></tr></thead> <tbody><tr><td><strong>&lt; 0.0.340</strong></td> <td><code>from langchain_experimental.agents import...</code></td> <td>✅ 可用</td></tr> <tr><td><strong>0.0.340 - 0.0.350</strong></td> <td><code>from langchain_experimental.agents import...</code></td> <td>✅ 可用</td></tr> <tr><td><strong>≥ 0.1.0</strong></td> <td><code>from langchain.agents import create_pandas_dataframe_agent</code></td> <td>✅ 推荐</td></tr> <tr><td><strong>≥ 0.2.0</strong></td> <td><code>from langchain_experimental.agents import...</code></td> <td>❌ 已移除</td></tr></tbody></table> <h2 id="查看langchain-版本"><a href="#查看langchain-版本" class="header-anchor">#</a> 查看langchain 版本</h2> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> langchain
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;LangChain版本: </span><span class="token interpolation"><span class="token punctuation">{</span>langchain<span class="token punctuation">.</span>__version__<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
</code></pre></div><h2 id="使用-create-openai-functions-agent"><a href="#使用-create-openai-functions-agent" class="header-anchor">#</a> 使用： create_openai_functions_agent</h2> <h3 id="新版本方式"><a href="#新版本方式" class="header-anchor">#</a> 新版本方式</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> langchain<span class="token punctuation">.</span>agents <span class="token keyword">import</span> create_openai_functions_agent<span class="token punctuation">,</span> AgentExecutor
agent <span class="token operator">=</span> create_openai_functions_agent<span class="token punctuation">(</span>llm<span class="token punctuation">,</span> tools<span class="token punctuation">,</span> prompt<span class="token punctuation">)</span>
executor <span class="token operator">=</span> AgentExecutor<span class="token punctuation">(</span>
    agent<span class="token operator">=</span>agent<span class="token punctuation">,</span>
    tools<span class="token operator">=</span>tools<span class="token punctuation">,</span>
    memory<span class="token operator">=</span>memory<span class="token punctuation">,</span>
    verbose<span class="token operator">=</span><span class="token boolean">True</span>
<span class="token punctuation">)</span>
<span class="token keyword">return</span> executor
</code></pre></div><h3 id="提示词模板缺少必需的-agent-scratchpad-变量"><a href="#提示词模板缺少必需的-agent-scratchpad-变量" class="header-anchor">#</a> 提示词模板缺少必需的 agent_scratchpad 变量</h3> <p>这个错误是因为提示词模板缺少必需的 <code>agent_scratchpad</code> 变量。以下是修复代码：</p> <h2 id="修复方案"><a href="#修复方案" class="header-anchor">#</a> 修复方案</h2> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> langchain_core<span class="token punctuation">.</span>prompts <span class="token keyword">import</span> ChatPromptTemplate<span class="token punctuation">,</span> MessagesPlaceholder

<span class="token comment"># 创建包含必需变量的提示词模板</span>
prompt <span class="token operator">=</span> ChatPromptTemplate<span class="token punctuation">.</span>from_messages<span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">(</span><span class="token string">&quot;system&quot;</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>_get_system_prompt<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token string">&quot;human&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;{input}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    MessagesPlaceholder<span class="token punctuation">(</span>variable_name<span class="token operator">=</span><span class="token string">&quot;agent_scratchpad&quot;</span><span class="token punctuation">)</span>  <span class="token comment"># 必需变量</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>

agent <span class="token operator">=</span> create_openai_functions_agent<span class="token punctuation">(</span>
    tools<span class="token operator">=</span>self<span class="token punctuation">.</span>tools<span class="token punctuation">,</span>
    llm<span class="token operator">=</span>self<span class="token punctuation">.</span>llm<span class="token punctuation">,</span>
    prompt<span class="token operator">=</span>prompt
<span class="token punctuation">)</span>
</code></pre></div><h2 id="如果需要支持多轮对话-添加记忆变量"><a href="#如果需要支持多轮对话-添加记忆变量" class="header-anchor">#</a> 如果需要支持多轮对话，添加记忆变量：</h2> <div class="language-python extra-class"><pre class="language-python"><code>prompt <span class="token operator">=</span> ChatPromptTemplate<span class="token punctuation">.</span>from_messages<span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">(</span><span class="token string">&quot;system&quot;</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>_get_system_prompt<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    MessagesPlaceholder<span class="token punctuation">(</span>variable_name<span class="token operator">=</span><span class="token string">&quot;chat_history&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># 记忆变量</span>
    <span class="token punctuation">(</span><span class="token string">&quot;human&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;{input}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    MessagesPlaceholder<span class="token punctuation">(</span>variable_name<span class="token operator">=</span><span class="token string">&quot;agent_scratchpad&quot;</span><span class="token punctuation">)</span>  <span class="token comment"># 必需变量</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="完整的必需变量模板"><a href="#完整的必需变量模板" class="header-anchor">#</a> 完整的必需变量模板：</h2> <div class="language-python extra-class"><pre class="language-python"><code>prompt <span class="token operator">=</span> ChatPromptTemplate<span class="token punctuation">.</span>from_messages<span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">(</span><span class="token string">&quot;system&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;系统提示词&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    MessagesPlaceholder<span class="token punctuation">(</span>variable_name<span class="token operator">=</span><span class="token string">&quot;chat_history&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>     <span class="token comment"># 可选：记忆</span>
    <span class="token punctuation">(</span><span class="token string">&quot;human&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;{input}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                  <span class="token comment"># 必需：用户输入</span>
    MessagesPlaceholder<span class="token punctuation">(</span>variable_name<span class="token operator">=</span><span class="token string">&quot;agent_scratchpad&quot;</span><span class="token punctuation">)</span>  <span class="token comment"># 必需：Agent思考过程</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>关键是要包含 <code>agent_scratchpad</code> 这个必需的占位符。</strong></p> <h2 id="使用react-agent"><a href="#使用react-agent" class="header-anchor">#</a> 使用ReAct agent</h2> <p>Reasoning + Action 推理+行动</p> <p><code>create_react_agent</code> 是 LangChain 中一个非常强大的工具，它实现了 <strong>ReAct（Reasoning + Acting）</strong> 框架，让 LLM 能够通过&quot;思考-行动&quot;循环来解决问题。</p> <h2 id="🎯-react-代理的核心思想"><a href="#🎯-react-代理的核心思想" class="header-anchor">#</a> 🎯 ReAct 代理的核心思想</h2> <p>ReAct 代理通过交替进行：</p> <ul><li><strong>Reasoning（推理）</strong>：分析当前情况，决定下一步行动</li> <li><strong>Acting（行动）</strong>：执行工具调用与环境交互</li></ul> <h2 id="🔧-基本用法"><a href="#🔧-基本用法" class="header-anchor">#</a> 🔧 基本用法</h2> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> langchain<span class="token punctuation">.</span>agents <span class="token keyword">import</span> create_react_agent
<span class="token keyword">from</span> langchain <span class="token keyword">import</span> hub
<span class="token keyword">from</span> langchain<span class="token punctuation">.</span>agents <span class="token keyword">import</span> AgentExecutor
<span class="token keyword">from</span> langchain_community<span class="token punctuation">.</span>tools <span class="token keyword">import</span> Tool
<span class="token keyword">from</span> langchain_community<span class="token punctuation">.</span>utilities <span class="token keyword">import</span> SerpAPIWrapper
<span class="token keyword">from</span> langchain_openai <span class="token keyword">import</span> ChatOpenAI
<span class="token keyword">import</span> os

<span class="token comment"># 1. 定义工具</span>
search <span class="token operator">=</span> SerpAPIWrapper<span class="token punctuation">(</span><span class="token punctuation">)</span>
calculator <span class="token operator">=</span> Tool<span class="token punctuation">(</span>
    name<span class="token operator">=</span><span class="token string">&quot;Calculator&quot;</span><span class="token punctuation">,</span>
    func<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token builtin">eval</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># 简单计算器</span>
    description<span class="token operator">=</span><span class="token string">&quot;用于数学计算，输入数学表达式如 '2 + 3 * 4'&quot;</span>
<span class="token punctuation">)</span>

tools <span class="token operator">=</span> <span class="token punctuation">[</span>
    Tool<span class="token punctuation">(</span>
        name<span class="token operator">=</span><span class="token string">&quot;Search&quot;</span><span class="token punctuation">,</span>
        func<span class="token operator">=</span>search<span class="token punctuation">.</span>run<span class="token punctuation">,</span>
        description<span class="token operator">=</span><span class="token string">&quot;用于搜索当前事件或事实信息&quot;</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    calculator
<span class="token punctuation">]</span>

<span class="token comment"># 2. 获取 ReAct 提示模板</span>
prompt <span class="token operator">=</span> hub<span class="token punctuation">.</span>pull<span class="token punctuation">(</span><span class="token string">&quot;hwchase17/react&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 3. 创建 LLM</span>
llm <span class="token operator">=</span> ChatOpenAI<span class="token punctuation">(</span>model<span class="token operator">=</span><span class="token string">&quot;gpt-3.5-turbo&quot;</span><span class="token punctuation">,</span> temperature<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>

<span class="token comment"># 4. 创建 ReAct 代理</span>
agent <span class="token operator">=</span> create_react_agent<span class="token punctuation">(</span>llm<span class="token punctuation">,</span> tools<span class="token punctuation">,</span> prompt<span class="token punctuation">)</span>

<span class="token comment"># 5. 创建代理执行器</span>
agent_executor <span class="token operator">=</span> AgentExecutor<span class="token punctuation">(</span>
    agent<span class="token operator">=</span>agent<span class="token punctuation">,</span> 
    tools<span class="token operator">=</span>tools<span class="token punctuation">,</span> 
    verbose<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
    handle_parsing_errors<span class="token operator">=</span><span class="token boolean">True</span>
<span class="token punctuation">)</span>

<span class="token comment"># 6. 运行代理</span>
result <span class="token operator">=</span> agent_executor<span class="token punctuation">.</span>invoke<span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string">&quot;input&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;姚明现在的身高是多少？用计算器计算他比普通人高多少厘米？&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token string">&quot;output&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="📝-完整工作流程示例"><a href="#📝-完整工作流程示例" class="header-anchor">#</a> 📝 完整工作流程示例</h2> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> langchain<span class="token punctuation">.</span>agents <span class="token keyword">import</span> create_react_agent<span class="token punctuation">,</span> AgentExecutor
<span class="token keyword">from</span> langchain <span class="token keyword">import</span> hub
<span class="token keyword">from</span> langchain_community<span class="token punctuation">.</span>tools <span class="token keyword">import</span> Tool
<span class="token keyword">from</span> langchain_openai <span class="token keyword">import</span> ChatOpenAI
<span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> json

<span class="token keyword">class</span> <span class="token class-name">CustomTools</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;自定义工具集&quot;&quot;&quot;</span>
    
    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">get_weather</span><span class="token punctuation">(</span>city<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">str</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;获取天气信息（模拟）&quot;&quot;&quot;</span>
        weather_data <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;北京&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;晴，15°C&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;上海&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;多云，18°C&quot;</span><span class="token punctuation">,</span> 
            <span class="token string">&quot;深圳&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;雨，22°C&quot;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> weather_data<span class="token punctuation">.</span>get<span class="token punctuation">(</span>city<span class="token punctuation">,</span> <span class="token string-interpolation"><span class="token string">f&quot;找不到</span><span class="token interpolation"><span class="token punctuation">{</span>city<span class="token punctuation">}</span></span><span class="token string">的天气信息&quot;</span></span><span class="token punctuation">)</span>
    
    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">get_current_time</span><span class="token punctuation">(</span>query<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">str</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;获取当前时间&quot;&quot;&quot;</span>
        now <span class="token operator">=</span> datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f&quot;当前时间是: </span><span class="token interpolation"><span class="token punctuation">{</span>now<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d %H:%M:%S'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span>
    
    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">currency_converter</span><span class="token punctuation">(</span>amount<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">str</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;货币转换（模拟）&quot;&quot;&quot;</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            amount_num <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f&quot;</span><span class="token interpolation"><span class="token punctuation">{</span>amount_num<span class="token punctuation">}</span></span><span class="token string"> 美元 ≈ </span><span class="token interpolation"><span class="token punctuation">{</span>amount_num <span class="token operator">*</span> <span class="token number">7.2</span><span class="token punctuation">:</span><span class="token format-spec">.2f</span><span class="token punctuation">}</span></span><span class="token string"> 人民币&quot;</span></span>
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token string">&quot;请输入有效的金额&quot;</span>

<span class="token comment"># 创建工具列表</span>
tools <span class="token operator">=</span> <span class="token punctuation">[</span>
    Tool<span class="token punctuation">(</span>
        name<span class="token operator">=</span><span class="token string">&quot;GetWeather&quot;</span><span class="token punctuation">,</span>
        func<span class="token operator">=</span>CustomTools<span class="token punctuation">.</span>get_weather<span class="token punctuation">,</span>
        description<span class="token operator">=</span><span class="token string">&quot;获取城市天气信息，输入格式：'北京'&quot;</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    Tool<span class="token punctuation">(</span>
        name<span class="token operator">=</span><span class="token string">&quot;GetTime&quot;</span><span class="token punctuation">,</span> 
        func<span class="token operator">=</span>CustomTools<span class="token punctuation">.</span>get_current_time<span class="token punctuation">,</span>
        description<span class="token operator">=</span><span class="token string">&quot;获取当前时间，输入格式：'现在几点了'&quot;</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    Tool<span class="token punctuation">(</span>
        name<span class="token operator">=</span><span class="token string">&quot;CurrencyConverter&quot;</span><span class="token punctuation">,</span>
        func<span class="token operator">=</span>CustomTools<span class="token punctuation">.</span>currency_converter<span class="token punctuation">,</span> 
        description<span class="token operator">=</span><span class="token string">&quot;美元转人民币，输入格式：'100'&quot;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">]</span>

<span class="token keyword">def</span> <span class="token function">create_advanced_react_agent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;创建高级 ReAct 代理&quot;&quot;&quot;</span>
    
    <span class="token comment"># 加载 ReAct 提示模板</span>
    prompt <span class="token operator">=</span> hub<span class="token punctuation">.</span>pull<span class="token punctuation">(</span><span class="token string">&quot;hwchase17/react&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 创建 LLM</span>
    llm <span class="token operator">=</span> ChatOpenAI<span class="token punctuation">(</span>
        model<span class="token operator">=</span><span class="token string">&quot;gpt-3.5-turbo&quot;</span><span class="token punctuation">,</span>
        temperature<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>
        openai_api_key<span class="token operator">=</span>os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span><span class="token string">&quot;OPENAI_API_KEY&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    
    <span class="token comment"># 创建代理</span>
    agent <span class="token operator">=</span> create_react_agent<span class="token punctuation">(</span>llm<span class="token punctuation">,</span> tools<span class="token punctuation">,</span> prompt<span class="token punctuation">)</span>
    
    <span class="token comment"># 创建执行器</span>
    agent_executor <span class="token operator">=</span> AgentExecutor<span class="token punctuation">(</span>
        agent<span class="token operator">=</span>agent<span class="token punctuation">,</span>
        tools<span class="token operator">=</span>tools<span class="token punctuation">,</span>
        verbose<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
        handle_parsing_errors<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
        max_iterations<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span>  <span class="token comment"># 最大迭代次数</span>
        early_stopping_method<span class="token operator">=</span><span class="token string">&quot;generate&quot;</span>  <span class="token comment"># 提前停止策略</span>
    <span class="token punctuation">)</span>
    
    <span class="token keyword">return</span> agent_executor

<span class="token comment"># 使用代理</span>
<span class="token keyword">def</span> <span class="token function">run_examples</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    agent <span class="token operator">=</span> create_advanced_react_agent<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    examples <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;现在北京天气怎么样？告诉我当前时间，然后计算100美元等于多少人民币？&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;先获取上海天气，再告诉我现在的时间&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;计算50美元能换多少人民币，然后告诉我深圳的天气&quot;</span>
    <span class="token punctuation">]</span>
    
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> example <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>examples<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\n</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token string">'='</span><span class="token operator">*</span><span class="token number">50</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;示例 </span><span class="token interpolation"><span class="token punctuation">{</span>i<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>example<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token string">'='</span><span class="token operator">*</span><span class="token number">50</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            result <span class="token operator">=</span> agent<span class="token punctuation">.</span>invoke<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">:</span> example<span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;最终答案: </span><span class="token interpolation"><span class="token punctuation">{</span>result<span class="token punctuation">[</span><span class="token string">'output'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;执行出错: </span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
    run_examples<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="🎨-自定义提示模板"><a href="#🎨-自定义提示模板" class="header-anchor">#</a> 🎨 自定义提示模板</h2> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> langchain<span class="token punctuation">.</span>prompts <span class="token keyword">import</span> PromptTemplate

<span class="token comment"># 自定义 ReAct 提示模板</span>
custom_react_prompt <span class="token operator">=</span> PromptTemplate<span class="token punctuation">(</span>
    template<span class="token operator">=</span><span class="token triple-quoted-string string">&quot;&quot;&quot;你是一个智能助手，能够使用工具解决问题。按照以下格式回答：

问题: {input}

思考: 我需要分析问题并决定使用哪个工具
行动: 工具名称
行动输入: 工具输入
观察: 工具返回的结果

...（这个循环可以重复多次）

思考: 我现在有足够信息回答问题了
最终答案: 最终答案

开始！

问题: {input}
{agent_scratchpad}&quot;&quot;&quot;</span><span class="token punctuation">,</span>
    input_variables<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;agent_scratchpad&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span>

<span class="token comment"># 使用自定义提示创建代理</span>
custom_agent <span class="token operator">=</span> create_react_agent<span class="token punctuation">(</span>
    llm<span class="token operator">=</span>llm<span class="token punctuation">,</span>
    tools<span class="token operator">=</span>tools<span class="token punctuation">,</span> 
    prompt<span class="token operator">=</span>custom_react_prompt
<span class="token punctuation">)</span>
</code></pre></div><h2 id="🔧-高级配置选项"><a href="#🔧-高级配置选项" class="header-anchor">#</a> 🔧 高级配置选项</h2> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> langchain<span class="token punctuation">.</span>agents <span class="token keyword">import</span> AgentExecutor

<span class="token keyword">def</span> <span class="token function">create_robust_react_agent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;创建健壮的 ReAct 代理&quot;&quot;&quot;</span>
    
    prompt <span class="token operator">=</span> hub<span class="token punctuation">.</span>pull<span class="token punctuation">(</span><span class="token string">&quot;hwchase17/react&quot;</span><span class="token punctuation">)</span>
    llm <span class="token operator">=</span> ChatOpenAI<span class="token punctuation">(</span>model<span class="token operator">=</span><span class="token string">&quot;gpt-3.5-turbo&quot;</span><span class="token punctuation">,</span> temperature<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
    
    agent <span class="token operator">=</span> create_react_agent<span class="token punctuation">(</span>llm<span class="token punctuation">,</span> tools<span class="token punctuation">,</span> prompt<span class="token punctuation">)</span>
    
    <span class="token comment"># 高级执行器配置</span>
    agent_executor <span class="token operator">=</span> AgentExecutor<span class="token punctuation">(</span>
        agent<span class="token operator">=</span>agent<span class="token punctuation">,</span>
        tools<span class="token operator">=</span>tools<span class="token punctuation">,</span>
        verbose<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
        handle_parsing_errors<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
        max_iterations<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span>           <span class="token comment"># 增加最大迭代次数</span>
        max_execution_time<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span>      <span class="token comment"># 最大执行时间（秒）</span>
        early_stopping_method<span class="token operator">=</span><span class="token string">&quot;generate&quot;</span><span class="token punctuation">,</span>
        return_intermediate_steps<span class="token operator">=</span><span class="token boolean">True</span>  <span class="token comment"># 返回中间步骤</span>
    <span class="token punctuation">)</span>
    
    <span class="token keyword">return</span> agent_executor

<span class="token comment"># 使用并分析中间步骤</span>
agent <span class="token operator">=</span> create_robust_react_agent<span class="token punctuation">(</span><span class="token punctuation">)</span>
result <span class="token operator">=</span> agent<span class="token punctuation">.</span>invoke<span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string">&quot;input&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;查询北京天气，然后计算如果去旅游需要准备多少预算，假设每天花费100美元，玩3天&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;最终答案:&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">[</span><span class="token string">&quot;output&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\n中间步骤分析:&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> step <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;intermediate_steps&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;步骤 </span><span class="token interpolation"><span class="token punctuation">{</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>step<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
</code></pre></div><h2 id="🛠️-错误处理与调试"><a href="#🛠️-错误处理与调试" class="header-anchor">#</a> 🛠️ 错误处理与调试</h2> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">safe_agent_invoke</span><span class="token punctuation">(</span>agent<span class="token punctuation">,</span> query<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;安全的代理调用&quot;&quot;&quot;</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        result <span class="token operator">=</span> agent<span class="token punctuation">.</span>invoke<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">:</span> query<span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> result<span class="token punctuation">[</span><span class="token string">&quot;output&quot;</span><span class="token punctuation">]</span>
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f&quot;代理执行出错: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span>

<span class="token comment"># 测试各种边界情况</span>
test_queries <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;这是一个简单问题&quot;</span><span class="token punctuation">,</span>  <span class="token comment"># 不需要工具</span>
    <span class="token string">&quot;查询不存在的城市天气&quot;</span><span class="token punctuation">,</span>  <span class="token comment"># 工具返回错误</span>
    <span class="token string">&quot;计算无效表达式&quot;</span><span class="token punctuation">,</span>  <span class="token comment"># 工具执行错误</span>
    <span class="token string">&quot;需要多步推理的复杂问题&quot;</span>  <span class="token comment"># 正常流程</span>
<span class="token punctuation">]</span>

<span class="token keyword">for</span> query <span class="token keyword">in</span> test_queries<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\n查询: </span><span class="token interpolation"><span class="token punctuation">{</span>query<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    result <span class="token operator">=</span> safe_agent_invoke<span class="token punctuation">(</span>agent<span class="token punctuation">,</span> query<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;结果: </span><span class="token interpolation"><span class="token punctuation">{</span>result<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
</code></pre></div><h2 id="💡-最佳实践建议"><a href="#💡-最佳实践建议" class="header-anchor">#</a> 💡 最佳实践建议</h2> <h3 id="_1-工具设计原则"><a href="#_1-工具设计原则" class="header-anchor">#</a> 1. <strong>工具设计原则</strong></h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 好的工具描述</span>
good_tool <span class="token operator">=</span> Tool<span class="token punctuation">(</span>
    name<span class="token operator">=</span><span class="token string">&quot;Weather&quot;</span><span class="token punctuation">,</span>
    func<span class="token operator">=</span>get_weather<span class="token punctuation">,</span>
    description<span class="token operator">=</span><span class="token string">&quot;获取指定城市的当前天气情况。输入: 城市名称，如'北京'&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment"># 不好的工具描述  </span>
bad_tool <span class="token operator">=</span> Tool<span class="token punctuation">(</span>
    name<span class="token operator">=</span><span class="token string">&quot;Weather&quot;</span><span class="token punctuation">,</span>
    func<span class="token operator">=</span>get_weather<span class="token punctuation">,</span>
    description<span class="token operator">=</span><span class="token string">&quot;天气工具&quot;</span>  <span class="token comment"># 太模糊</span>
<span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-提示工程技巧"><a href="#_2-提示工程技巧" class="header-anchor">#</a> 2. <strong>提示工程技巧</strong></h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 在提示中添加领域知识</span>
domain_specific_prompt <span class="token operator">=</span> prompt<span class="token punctuation">.</span>partial<span class="token punctuation">(</span>
    domain_knowledge<span class="token operator">=</span><span class="token string">&quot;你是一个旅游助手，专门帮助用户规划旅行。&quot;</span>
<span class="token punctuation">)</span>
</code></pre></div><h3 id="_3-性能优化"><a href="#_3-性能优化" class="header-anchor">#</a> 3. <strong>性能优化</strong></h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 限制工具调用次数</span>
agent_executor <span class="token operator">=</span> AgentExecutor<span class="token punctuation">(</span>
    agent<span class="token operator">=</span>agent<span class="token punctuation">,</span>
    tools<span class="token operator">=</span>tools<span class="token punctuation">,</span>
    max_iterations<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span>  <span class="token comment"># 避免无限循环</span>
    early_stopping_method<span class="token operator">=</span><span class="token string">&quot;generate&quot;</span>
<span class="token punctuation">)</span>
</code></pre></div><h2 id="🎯-典型应用场景"><a href="#🎯-典型应用场景" class="header-anchor">#</a> 🎯 典型应用场景</h2> <h3 id="_1-数据分析代理"><a href="#_1-数据分析代理" class="header-anchor">#</a> 1. <strong>数据分析代理</strong></h3> <div class="language-python extra-class"><pre class="language-python"><code>tools <span class="token operator">=</span> <span class="token punctuation">[</span>
    Tool<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;查询数据库&quot;</span><span class="token punctuation">,</span> func<span class="token operator">=</span>query_db<span class="token punctuation">,</span> description<span class="token operator">=</span><span class="token string">&quot;执行SQL查询&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Tool<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;数据统计&quot;</span><span class="token punctuation">,</span> func<span class="token operator">=</span>calculate_stats<span class="token punctuation">,</span> description<span class="token operator">=</span><span class="token string">&quot;计算统计指标&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Tool<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;生成图表&quot;</span><span class="token punctuation">,</span> func<span class="token operator">=</span>generate_plot<span class="token punctuation">,</span> description<span class="token operator">=</span><span class="token string">&quot;创建数据可视化&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>

agent <span class="token operator">=</span> create_react_agent<span class="token punctuation">(</span>llm<span class="token punctuation">,</span> tools<span class="token punctuation">,</span> prompt<span class="token punctuation">)</span>
result <span class="token operator">=</span> agent<span class="token punctuation">.</span>invoke<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;分析上个月销售数据，找出最畅销的产品并生成趋势图&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-客户服务代理"><a href="#_2-客户服务代理" class="header-anchor">#</a> 2. <strong>客户服务代理</strong></h3> <div class="language-python extra-class"><pre class="language-python"><code>tools <span class="token operator">=</span> <span class="token punctuation">[</span>
    Tool<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;查询订单&quot;</span><span class="token punctuation">,</span> func<span class="token operator">=</span>lookup_order<span class="token punctuation">,</span> description<span class="token operator">=</span><span class="token string">&quot;根据订单号查询订单状态&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Tool<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;检查库存&quot;</span><span class="token punctuation">,</span> func<span class="token operator">=</span>check_inventory<span class="token punctuation">,</span> description<span class="token operator">=</span><span class="token string">&quot;查询产品库存&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Tool<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;创建工单&quot;</span><span class="token punctuation">,</span> func<span class="token operator">=</span>create_ticket<span class="token punctuation">,</span> description<span class="token operator">=</span><span class="token string">&quot;创建客服工单&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre></div><p><strong>总结</strong>：<code>create_react_agent</code> 提供了一个强大的框架，让 LLM 能够通过工具使用和环境交互来解决复杂问题。关键是设计好工具集、优化提示模板，并合理配置执行参数。</p> <h2 id="代码结构分析"><a href="#代码结构分析" class="header-anchor">#</a> 代码结构分析</h2> <p>您的代码结构是正确的，分为两个主要部分：</p> <h3 id="_1-indexing-索引构建-部分-✅"><a href="#_1-indexing-索引构建-部分-✅" class="header-anchor">#</a> 1. INDEXING（索引构建）部分 ✅</h3> <ul><li><strong>文档加载</strong>: 使用 <code>WebBaseLoader</code> 正确加载了网页内容</li> <li><strong>文本分割</strong>: 使用 <code>RecursiveCharacterTextSplitter</code> 适当分割文档</li> <li><strong>向量化</strong>: 使用 <code>HuggingFaceEmbeddings</code> 和本地模型 <code>bge-large-zh-v1.5</code></li> <li><strong>向量存储</strong>: 使用 <code>Chroma</code> 存储向量，创建检索器</li></ul> <h3 id="_2-retrieval-and-generation-检索与生成-部分-✅"><a href="#_2-retrieval-and-generation-检索与生成-部分-✅" class="header-anchor">#</a> 2. RETRIEVAL and GENERATION（检索与生成）部分 ✅</h3> <ul><li><strong>提示词</strong>: 从 LangChain Hub 拉取 RAG 提示模板</li> <li><strong>LLM 配置</strong>: 正确配置了 DeepSeek API</li> <li><strong>处理链</strong>: 构建了标准的 RAG 流程：检索 → 格式化 → 提示 → LLM → 输出解析</li> <li><strong>执行</strong>: 使用 <code>chain.invoke</code> 执行处理链，获取模型输出</li></ul></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-7115df4a data-v-1c636796><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#langchain-agent" class="sidebar-link reco-side-langchain-agent" data-v-7115df4a>langchain Agent</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#一、核心思想-从-工具-到-大脑" class="sidebar-link reco-side-一、核心思想-从-工具-到-大脑" data-v-7115df4a>一、核心思想：从“工具”到“大脑”</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#二、agent-的关键组成部分" class="sidebar-link reco-side-二、agent-的关键组成部分" data-v-7115df4a>二、Agent 的关键组成部分</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#三、agent-的工作流程-react-框架" class="sidebar-link reco-side-三、agent-的工作流程-react-框架" data-v-7115df4a>三、Agent 的工作流程（ReAct 框架）</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#四、代码示例-创建一个简单的-agent" class="sidebar-link reco-side-四、代码示例-创建一个简单的-agent" data-v-7115df4a>四、代码示例：创建一个简单的 Agent</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#五、总结-agent-的优势与挑战" class="sidebar-link reco-side-五、总结-agent-的优势与挑战" data-v-7115df4a>五、总结：Agent 的优势与挑战</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#_1-langchain-agent的概念" class="sidebar-link reco-side-_1-langchain-agent的概念" data-v-7115df4a>1. langchain Agent的概念?</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#_2-核心概念" class="sidebar-link reco-side-_2-核心概念" data-v-7115df4a>2. 核心概念</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#_3-关键特性" class="sidebar-link reco-side-_3-关键特性" data-v-7115df4a>3. 关键特性</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#langchain-memory" class="sidebar-link reco-side-langchain-memory" data-v-7115df4a>LangChain Memory</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#_1-from-langchain-memory-import-conversationbuffermemory" class="sidebar-link reco-side-_1-from-langchain-memory-import-conversationbuffermemory" data-v-7115df4a>1. from langchain.memory import ConversationBufferMemory</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#_2-from-langchain-agents-import-agenttype-initialize-agent-tool" class="sidebar-link reco-side-_2-from-langchain-agents-import-agenttype-initialize-agent-tool" data-v-7115df4a>2. from langchain.agents import AgentType, initialize_agent, Tool</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#_1-agenttype-agent类型枚举" class="sidebar-link reco-side-_1-agenttype-agent类型枚举" data-v-7115df4a>1. AgentType - Agent类型枚举</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#作用" class="sidebar-link reco-side-作用" data-v-7115df4a>作用：</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#常用的agenttype" class="sidebar-link reco-side-常用的agenttype" data-v-7115df4a>常用的AgentType：</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#各种类型的特点" class="sidebar-link reco-side-各种类型的特点" data-v-7115df4a>各种类型的特点：</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#_2-tool-工具类" class="sidebar-link reco-side-_2-tool-工具类" data-v-7115df4a>2. Tool - 工具类</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#作用-2" class="sidebar-link reco-side-作用-2" data-v-7115df4a>作用：</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#基本用法" class="sidebar-link reco-side-基本用法" data-v-7115df4a>基本用法：</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#tool参数说明" class="sidebar-link reco-side-tool参数说明" data-v-7115df4a>Tool参数说明：</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#_3-initialize-agent-初始化agent" class="sidebar-link reco-side-_3-initialize-agent-初始化agent" data-v-7115df4a>3. initialize_agent - 初始化Agent</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#作用-3" class="sidebar-link reco-side-作用-3" data-v-7115df4a>作用：</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#基本用法-2" class="sidebar-link reco-side-基本用法-2" data-v-7115df4a>基本用法：</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#完整参数示例" class="sidebar-link reco-side-完整参数示例" data-v-7115df4a>完整参数示例：</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#_4-版本信息" class="sidebar-link reco-side-_4-版本信息" data-v-7115df4a>4. 版本信息</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#initialize-agent-所在的langchain版本" class="sidebar-link reco-side-initialize-agent-所在的langchain版本" data-v-7115df4a>initialize_agent 所在的LangChain版本：</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#当前推荐的使用方式" class="sidebar-link reco-side-当前推荐的使用方式" data-v-7115df4a>当前推荐的使用方式：</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#检查你的langchain版本" class="sidebar-link reco-side-检查你的langchain版本" data-v-7115df4a>检查你的LangChain版本：</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#_5-完整工作示例" class="sidebar-link reco-side-_5-完整工作示例" data-v-7115df4a>5. 完整工作示例</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#总结" class="sidebar-link reco-side-总结" data-v-7115df4a>总结</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#如何使用langchain-的各个核心组件" class="sidebar-link reco-side-如何使用langchain-的各个核心组件" data-v-7115df4a>如何使用langchain 的各个核心组件</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#注意langchain-不同版本-initialize-agent-函数的参数可能会有差异-建议查看对应版本的文档。" class="sidebar-link reco-side-注意langchain-不同版本-initialize-agent-函数的参数可能会有差异-建议查看对应版本的文档。" data-v-7115df4a>注意langchain 不同版本，initialize_agent 函数的参数可能会有差异，建议查看对应版本的文档。</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#版本兼容性对照表" class="sidebar-link reco-side-版本兼容性对照表" data-v-7115df4a>版本兼容性对照表</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#查看langchain-版本" class="sidebar-link reco-side-查看langchain-版本" data-v-7115df4a>查看langchain 版本</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#使用-create-openai-functions-agent" class="sidebar-link reco-side-使用-create-openai-functions-agent" data-v-7115df4a>使用： createopenaifunctions_agent</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#新版本方式" class="sidebar-link reco-side-新版本方式" data-v-7115df4a>新版本方式</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#提示词模板缺少必需的-agent-scratchpad-变量" class="sidebar-link reco-side-提示词模板缺少必需的-agent-scratchpad-变量" data-v-7115df4a>提示词模板缺少必需的 agent_scratchpad 变量</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#修复方案" class="sidebar-link reco-side-修复方案" data-v-7115df4a>修复方案</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#如果需要支持多轮对话-添加记忆变量" class="sidebar-link reco-side-如果需要支持多轮对话-添加记忆变量" data-v-7115df4a>如果需要支持多轮对话，添加记忆变量：</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#完整的必需变量模板" class="sidebar-link reco-side-完整的必需变量模板" data-v-7115df4a>完整的必需变量模板：</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#使用react-agent" class="sidebar-link reco-side-使用react-agent" data-v-7115df4a>使用ReAct agent</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#🎯-react-代理的核心思想" class="sidebar-link reco-side-🎯-react-代理的核心思想" data-v-7115df4a>🎯 ReAct 代理的核心思想</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#🔧-基本用法" class="sidebar-link reco-side-🔧-基本用法" data-v-7115df4a>🔧 基本用法</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#📝-完整工作流程示例" class="sidebar-link reco-side-📝-完整工作流程示例" data-v-7115df4a>📝 完整工作流程示例</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#🎨-自定义提示模板" class="sidebar-link reco-side-🎨-自定义提示模板" data-v-7115df4a>🎨 自定义提示模板</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#🔧-高级配置选项" class="sidebar-link reco-side-🔧-高级配置选项" data-v-7115df4a>🔧 高级配置选项</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#🛠️-错误处理与调试" class="sidebar-link reco-side-🛠️-错误处理与调试" data-v-7115df4a>🛠️ 错误处理与调试</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#💡-最佳实践建议" class="sidebar-link reco-side-💡-最佳实践建议" data-v-7115df4a>💡 最佳实践建议</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#_1-工具设计原则" class="sidebar-link reco-side-_1-工具设计原则" data-v-7115df4a>1. 工具设计原则</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#_2-提示工程技巧" class="sidebar-link reco-side-_2-提示工程技巧" data-v-7115df4a>2. 提示工程技巧</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#_3-性能优化" class="sidebar-link reco-side-_3-性能优化" data-v-7115df4a>3. 性能优化</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#🎯-典型应用场景" class="sidebar-link reco-side-🎯-典型应用场景" data-v-7115df4a>🎯 典型应用场景</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#_1-数据分析代理" class="sidebar-link reco-side-_1-数据分析代理" data-v-7115df4a>1. 数据分析代理</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#_2-客户服务代理" class="sidebar-link reco-side-_2-客户服务代理" data-v-7115df4a>2. 客户服务代理</a></li><li class="level-2" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#代码结构分析" class="sidebar-link reco-side-代码结构分析" data-v-7115df4a>代码结构分析</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#_1-indexing-索引构建-部分-✅" class="sidebar-link reco-side-_1-indexing-索引构建-部分-✅" data-v-7115df4a>1. INDEXING（索引构建）部分 ✅</a></li><li class="level-3" data-v-7115df4a><a href="/hmblog/modelstudy/langchain-study.html#_2-retrieval-and-generation-检索与生成-部分-✅" class="sidebar-link reco-side-_2-retrieval-and-generation-检索与生成-部分-✅" data-v-7115df4a>2. RETRIEVAL and GENERATION（检索与生成）部分 ✅</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-65133105 data-v-65133105><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-65133105><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-65133105></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-65133105></path></svg></div><!----></div></div>
    <script src="/hmblog/assets/js/app.ba48173d.js" defer></script><script src="/hmblog/assets/js/3.ac02bfbd.js" defer></script><script src="/hmblog/assets/js/1.ba4d6411.js" defer></script><script src="/hmblog/assets/js/45.c5ced175.js" defer></script><script src="/hmblog/assets/js/9.d5a05a45.js" defer></script>
  </body>
</html>
